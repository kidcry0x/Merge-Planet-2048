window.__require=function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){return r(t[a][1][e]||e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<i.length;a++)r(i[a]);return r}({Analytics:[function(e,t,n){"use strict";var i,r,o;cc._RF.push(t,"86f9dfSHvZNhotdEcUyjOAv","Analytics"),Object.defineProperty(n,"__esModule",{value:!0}),n.EGAAdType=n.EGAAdError=n.EGAAdAction=void 0,function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(i=n.EGAAdAction||(n.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(r=n.EGAAdError||(n.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(o=n.EGAAdType||(n.EGAAdType={})),n.default={EGAAdAction:i,EGAAdError:r,EGAAdType:o},cc._RF.pop()},{}],AudioController:[function(e,t,n){"use strict";cc._RF.push(t,"956e7oCyxBK0qwibuR8YMD2","AudioController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s=e("./Effect"),c=cc._decorator,u=c.ccclass,d=c.property;(function(e){e[e.ON=1]="ON",e[e.OFF=0]="OFF"})(a||(a={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprites=[],t.audioState=a.ON,t.gameScene=null,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e){this.gameScene=e},t.prototype.start=function(){},t.prototype.changeState=function(e){var t=this;s.default.btnClickEffect(e,function(){t.audioState=t.audioState===a.ON?a.OFF:a.ON,t.gameScene.getComponent(cc.AudioSource).volume=t.audioState===a.ON?.5:0,t.node.getComponent(cc.Sprite).spriteFrame=t.sprites[t.audioState]})},o([d([cc.SpriteFrame])],t.prototype,"sprites",void 0),o([u],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./Effect":"Effect"}],Board:[function(e,t,n){"use strict";cc._RF.push(t,"8e74b/2jYtHIpIl04onurK6","Board");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Constant"),s=e("./Disk"),c=e("./FirebaseManager"),u=e("./DataController"),d=e("./Meteorite"),l=e("./TiniController"),f=cc._decorator,h=f.ccclass,p=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trophyScore=null,t.diskScore=null,t.bestScore=null,t.stageLevel=null,t.diskPrefab=null,t.diskSpearPrefab=null,t.diskLayer=null,t.spear=null,t.backgrounds=[],t.impluseBar=null,t.meteorite=null,t.gameScene=null,t.gameLauncher=null,t.isLoadInterestialAds=!0,t.gameLevel=1,t.timeover=null,t}return r(t,e),t.prototype.onLoad=function(){this.diskLayer.removeAllChildren(),this.initStage()},t.prototype.start=function(){},t.prototype.init=function(e,t){this.gameScene=e,this.gameLauncher=t,this.reset(),this.addEventListener()},t.prototype.reset=function(){this.addEventListener(),this.diskLayer.removeAllChildren(),this.gameLevel=1;for(var e=0;e<this.randomNewDiskNumber();e++)this.newDisk();this.setScore(),this.initStage()},t.prototype.newDisk=function(){var e=cc.instantiate(this.diskPrefab).getComponent(s.default);e.n=this.randomNumber();var t=e.getComponent(cc.PhysicsCircleCollider),n=e.node.width,i=e.node.height/2,r=this.diskLayer.height-i,o=n/2-this.diskLayer.width/2,a=this.diskLayer.width/2-n/2;e.node.y=this.getRandomPos(i,r),e.node.x=this.getRandomPos(o,a),e.node.parent=this.diskLayer,e.init(this,this.gameScene),t.radius=e.node.width/2,t.apply()},t.prototype.randomNewDiskNumber=function(){return Math.random()<.5?2:3},t.prototype.randomNumber=function(){return Math.random()<.5?2:4},t.prototype.getRandomPos=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},t.prototype.onMouseMove=function(e){this.setAngleLauncher(e)},t.prototype.getRadWhenMouseMove=function(e){var t=e.getLocationY()-this.gameScene.launcherPoint.y,n=Math.abs(e.getLocationX()-this.gameScene.node.width/2),i=Math.sqrt(Math.pow(t,2)+Math.pow(n,2));return Math.asin(t/i)*(180/Math.PI)},t.prototype.setAngleLauncher=function(e){var t=this.getRadWhenMouseMove(e);e.getLocationX()<this.gameScene.node.width/2?this.gameScene.launcherPoint.angle=180-t:this.gameScene.launcherPoint.angle=t,this.gameScene.launcherPoint.active=!(t<0)},t.prototype.onMouseDown=function(e){this.setAngleLauncher(e),cc.tween(this.gameScene.launcherPoint).to(.1,{scale:.8}).start(),cc.tween(this.gameScene.launcher.node).to(.1,{scale:.8}).start(),cc.tween(this.gameScene.launcherCircle).to(.1,{scale:.8}).start(),this.gameScene.launcher.resetImpluse(),this.gameScene.launcher.startIncreaseImpluse()},t.prototype.onMouseUp=function(e){var t=this;this.gameScene.launcher.resetImpluse();var n=this.getRadWhenMouseMove(e);cc.tween(this.gameScene.launcherPoint).to(.1,{scale:1}).start(),cc.tween(this.gameScene.launcher.node).to(.1,{scale:1}).start(),cc.tween(this.gameScene.launcherCircle).to(.1,{scale:1}).call(function(){t.gameLauncher.startLauncher(n,e.getLocationX())}).start()},t.prototype.onBoardColliderIntersect=function(e,t){var n=e.getComponent(s.default),i=t.getComponent(s.default);if(i&&n&&n.n==i.n){n.n*=2,this.diskLayer.removeChild(i.node);var r=e.getComponent(cc.RigidBody).node.getPosition(),o=t.getComponent(cc.RigidBody).node.getPosition();this.playAnimDiskSpear(r),this.playAnimDiskSpear(o),this.spear.getComponent(cc.Animation).play()}},t.prototype.onBoardColliderEnd=function(){this.setScore(),this.saveScore()},t.prototype.playAnimDiskSpear=function(e){var t=this,n=cc.instantiate(this.diskSpearPrefab),i=n.getChildByName("Spear").getComponent(cc.Animation),r=n.getChildByName("Star").getComponent(cc.Animation),o=n.getChildByName("Star 2").getComponent(cc.Animation),a=n.getChildByName("Star 3").getComponent(cc.Animation);n.getComponent("DiskSpear").node.parent=this.diskLayer,n.getComponent("DiskSpear").node.setPosition(e),n.getComponent("DiskSpear").node.angle=Math.floor(360*Math.random()+0),i.play(),r.play(),o.play(),a.play(),setTimeout(function(){t.diskLayer.removeChild(n)},600)},t.prototype.initStage=function(){this.stageLevel.string="C\u1ea5p \u0111\u1ed9: "+this.gameLevel},t.prototype.checkLevelUp=function(){var e=this;this.currentTrophy>=a.STAGE[this.gameLevel-1].trophyTarget&&(this.gameLevel++,this.stageLevel.string="C\u1ea5p \u0111\u1ed9: "+this.gameLevel,this.gameScene.logNextLevel(this.gameLevel),this.diskLayer.children.forEach(function(t){if(t.getComponent(s.default)){var n=t.getChildByName("Self spear").getComponent(cc.Animation).play(),i=e.node.parent.getChildByName("Spear").getComponent(cc.Animation).play();n.repeatCount=2,i.repeatCount=2}}),setTimeout(function(){e.gameLauncher.resetImpluse(),e.gameLauncher.impluse=1e3},2e3))},t.prototype.setScore=function(){var e=0,t=0;this.diskLayer.children.forEach(function(n){"Disk"===n.name&&(e+=n.getComponent(s.default).n,t++)}),this.currentTrophy=e,this.currentDisk=t,this.trophyScore.string=this.currentTrophy+"/"+a.STAGE[this.gameLevel-1].trophyTarget,this.diskScore.string=this.currentDisk+"/"+a.STAGE[this.gameLevel-1].diskLauncherMax},t.prototype.initBestScore=function(){var e=this;u.default.getInstance().getData().then(function(t){e.bestScore.string="\u0110i\u1ec3m cao: "+t.bestScore})},t.prototype.saveScore=function(){var e=this;u.default.getInstance().getData().then(function(t){var n=t.bestScore;e.currentTrophy>n&&(u.default.getInstance().saveData({isNewBie:t.isNewBie,bestScore:e.currentTrophy}),e.bestScore.string="\u0110i\u1ec3m cao: "+e.currentTrophy,l.default.getInstance().isHasTiniApp()&&l.default.getInstance().getPlayerInfo().then(function(t){c.default.getInstance().setPlayerData(t.customerId,{bestScore:e.currentTrophy,ava:t.avatar,name:t.name})}))})},t.prototype.addEventListener=function(){var e=this;this.node.on("game-over",function(){e.gameScene.gameOver()},this),this.node.once("game-win",function(){e.gameScene.gameWin()},this)},t.prototype.update=function(){this.gameScene.judgeOver()?this.diskScore.node.color=cc.Color.RED:this.diskScore.node.color=cc.Color.WHITE},o([p(cc.Label)],t.prototype,"trophyScore",void 0),o([p(cc.Label)],t.prototype,"diskScore",void 0),o([p(cc.Label)],t.prototype,"bestScore",void 0),o([p(cc.Label)],t.prototype,"stageLevel",void 0),o([p(cc.Prefab)],t.prototype,"diskPrefab",void 0),o([p(cc.Prefab)],t.prototype,"diskSpearPrefab",void 0),o([p(cc.Node)],t.prototype,"diskLayer",void 0),o([p(cc.Node)],t.prototype,"spear",void 0),o([p([cc.SpriteFrame])],t.prototype,"backgrounds",void 0),o([p(cc.Node)],t.prototype,"impluseBar",void 0),o([p(d.default)],t.prototype,"meteorite",void 0),o([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"./Constant":"Constant","./DataController":"DataController","./Disk":"Disk","./FirebaseManager":"FirebaseManager","./Meteorite":"Meteorite","./TiniController":"TiniController"}],Constant:[function(e,t,n){"use strict";cc._RF.push(t,"7110eDUPV1BOrwWzhzzsBOO","Constant"),Object.defineProperty(n,"__esModule",{value:!0}),n.CONFIG=n.STAGE=void 0,n.STAGE=[{level:1,trophyTarget:24,diskLauncherMax:6},{level:2,trophyTarget:56,diskLauncherMax:7},{level:3,trophyTarget:128,diskLauncherMax:8},{level:4,trophyTarget:288,diskLauncherMax:9},{level:5,trophyTarget:640,diskLauncherMax:10},{level:6,trophyTarget:1408,diskLauncherMax:11},{level:7,trophyTarget:3072,diskLauncherMax:12},{level:8,trophyTarget:4400,diskLauncherMax:14},{level:9,trophyTarget:6430,diskLauncherMax:15},{level:10,trophyTarget:8540,diskLauncherMax:16},{level:11,trophyTarget:10540,diskLauncherMax:17},{level:12,trophyTarget:12540,diskLauncherMax:18},{level:13,trophyTarget:14540,diskLauncherMax:19},{level:14,trophyTarget:16540,diskLauncherMax:20},{level:15,trophyTarget:18540,diskLauncherMax:21},{level:16,trophyTarget:20540,diskLauncherMax:22},{level:17,trophyTarget:22540,diskLauncherMax:23},{level:18,trophyTarget:24540,diskLauncherMax:24},{level:19,trophyTarget:26540,diskLauncherMax:25},{level:20,trophyTarget:28540,diskLauncherMax:26},{level:21,trophyTarget:30540,diskLauncherMax:27},{level:22,trophyTarget:32540,diskLauncherMax:28},{level:23,trophyTarget:34540,diskLauncherMax:29},{level:24,trophyTarget:36540,diskLauncherMax:30},{level:25,trophyTarget:38540,diskLauncherMax:31},{level:26,trophyTarget:40540,diskLauncherMax:32},{level:27,trophyTarget:42540,diskLauncherMax:33},{level:28,trophyTarget:44540,diskLauncherMax:34},{level:29,trophyTarget:46540,diskLauncherMax:35},{level:30,trophyTarget:48540,diskLauncherMax:36},{level:31,trophyTarget:50540,diskLauncherMax:37},{level:32,trophyTarget:52540,diskLauncherMax:38},{level:33,trophyTarget:54540,diskLauncherMax:39},{level:34,trophyTarget:56540,diskLauncherMax:40}],n.CONFIG={winCondition:2048},cc._RF.pop()},{}],1:[function(e,t){(function(e){"use strict";var n,i,r,o,a=a||function(e){var t={},n=t.lib={},i=function(){},r=n.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;r<e;r++)t[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),a=t.enc={},s=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var r=t[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new o.init(n,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new o.init(n,t)}},u=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,a=this.blockSize,s=r/(4*a);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,r=e.min(4*t,r),t){for(var c=0;c<t;c+=a)this._doProcessBlock(i,c);c=i.splice(0,t),n.sigBytes-=r}return new o.init(c,r)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=d.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new l.HMAC.init(e,n).finalize(t)}}});var l=t.algo={};return t}(Math);(function(e){for(var t=a,n=(r=t.lib).WordArray,i=r.Hasher,r=t.algo,o=[],s=[],c=function(e){return 4294967296*(e-(0|e))|0},u=2,d=0;64>d;){var l;e:{l=u;for(var f=e.sqrt(l),h=2;h<=f;h++)if(!(l%h)){l=!1;break e}l=!0}l&&(8>d&&(o[d]=c(e.pow(u,.5))),s[d]=c(e.pow(u,1/3)),d++),u++}var p=[];r=r.SHA256=i.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],c=n[4],u=n[5],d=n[6],l=n[7],f=0;64>f;f++){if(16>f)p[f]=0|e[t+f];else{var h=p[f-15],g=p[f-2];p[f]=((h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3)+p[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[f-16]}h=l+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&d)+s[f]+p[f],g=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&r^i&o^r&o),l=d,d=u,u=c,c=a+h|0,a=o,o=r,r=i,i=h+g|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+l|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=e.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=i._createHelper(r),t.HmacSHA256=i._createHmacHelper(r)})(Math),i=(n=a).enc.Utf8,n.algo.HMAC=n.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),function(){var e=a,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var r=0;r<n;r+=3)for(var o=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,a=0;4>a&&r+.75*a<n;a++)e.push(i.charAt(o>>>6*(3-a)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,i=this._map;(r=i.charAt(64))&&-1!=(r=e.indexOf(r))&&(n=r);for(var r=[],o=0,a=0;a<n;a++)if(a%4){var s=i.indexOf(e.charAt(a-1))<<a%4*2,c=i.indexOf(e.charAt(a))>>>6-a%4*2;r[o>>>2]|=(s|c)<<24-o%4*8,o++}return t.create(r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"})(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(e.EGAAdAction||(e.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(e.EGAAdError||(e.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(e.EGAAdType||(e.EGAAdType={})),function(e){(function(e){e[e.NoResponse=0]="NoResponse",e[e.BadResponse=1]="BadResponse",e[e.RequestTimeout=2]="RequestTimeout",e[e.JsonEncodeFailed=3]="JsonEncodeFailed",e[e.JsonDecodeFailed=4]="JsonDecodeFailed",e[e.InternalServerError=5]="InternalServerError",e[e.BadRequest=6]="BadRequest",e[e.Unauthorized=7]="Unauthorized",e[e.UnknownResponseCode=8]="UnknownResponseCode",e[e.Ok=9]="Ok",e[e.Created=10]="Created"})(e.EGAHTTPApiResponse||(e.EGAHTTPApiResponse={}))}(e.http||(e.http={})),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.EventValidation=1]="EventValidation",e[e.Database=2]="Database",e[e.Init=3]="Init",e[e.Http=4]="Http",e[e.Json=5]="Json"})(e.EGASdkErrorCategory||(e.EGASdkErrorCategory={})),function(e){e[e.Undefined=0]="Undefined",e[e.BusinessEvent=1]="BusinessEvent",e[e.ResourceEvent=2]="ResourceEvent",e[e.ProgressionEvent=3]="ProgressionEvent",e[e.DesignEvent=4]="DesignEvent",e[e.ErrorEvent=5]="ErrorEvent",e[e.InitHttp=9]="InitHttp",e[e.EventsHttp=10]="EventsHttp",e[e.ProcessEvents=11]="ProcessEvents",e[e.AddEventsToStore=12]="AddEventsToStore",e[e.AdEvent=20]="AdEvent"}(e.EGASdkErrorArea||(e.EGASdkErrorArea={})),function(e){e[e.Undefined=0]="Undefined",e[e.InvalidCurrency=1]="InvalidCurrency",e[e.InvalidShortString=2]="InvalidShortString",e[e.InvalidEventPartLength=3]="InvalidEventPartLength",e[e.InvalidEventPartCharacters=4]="InvalidEventPartCharacters",e[e.InvalidStore=5]="InvalidStore",e[e.InvalidFlowType=6]="InvalidFlowType",e[e.StringEmptyOrNull=7]="StringEmptyOrNull",e[e.NotFoundInAvailableCurrencies=8]="NotFoundInAvailableCurrencies",e[e.InvalidAmount=9]="InvalidAmount",e[e.NotFoundInAvailableItemTypes=10]="NotFoundInAvailableItemTypes",e[e.WrongProgressionOrder=11]="WrongProgressionOrder",e[e.InvalidEventIdLength=12]="InvalidEventIdLength",e[e.InvalidEventIdCharacters=13]="InvalidEventIdCharacters",e[e.InvalidProgressionStatus=15]="InvalidProgressionStatus",e[e.InvalidSeverity=16]="InvalidSeverity",e[e.InvalidLongString=17]="InvalidLongString",e[e.DatabaseTooLarge=18]="DatabaseTooLarge",e[e.DatabaseOpenOrCreate=19]="DatabaseOpenOrCreate",e[e.JsonError=25]="JsonError",e[e.FailHttpJsonDecode=29]="FailHttpJsonDecode",e[e.FailHttpJsonEncode=30]="FailHttpJsonEncode",e[e.InvalidAdAction=31]="InvalidAdAction",e[e.InvalidAdType=32]="InvalidAdType",e[e.InvalidString=33]="InvalidString"}(e.EGASdkErrorAction||(e.EGASdkErrorAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Currency=1]="Currency",e[e.CartType=2]="CartType",e[e.ItemType=3]="ItemType",e[e.ItemId=4]="ItemId",e[e.Store=5]="Store",e[e.FlowType=6]="FlowType",e[e.Amount=7]="Amount",e[e.Progression01=8]="Progression01",e[e.Progression02=9]="Progression02",e[e.Progression03=10]="Progression03",e[e.EventId=11]="EventId",e[e.ProgressionStatus=12]="ProgressionStatus",e[e.Severity=13]="Severity",e[e.Message=14]="Message",e[e.AdAction=15]="AdAction",e[e.AdType=16]="AdType",e[e.AdSdkName=17]="AdSdkName",e[e.AdPlacement=18]="AdPlacement"}(e.EGASdkErrorParameter||(e.EGASdkErrorParameter={}))}(e.events||(e.events={}))}(o||(o={})),function(e){(function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"})(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(e.EGAAdAction||(e.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(e.EGAAdError||(e.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(e.EGAAdType||(e.EGAAdType={}))}(r||(r={})),function(e){(function(e){var t;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"})(t||(t={}));var n=function(){function e(){e.debugEnabled=!1}return e.setInfoLog=function(t){e.instance.infoLogEnabled=t},e.setVerboseLog=function(t){e.instance.infoLogVerboseEnabled=t},e.i=function(n){if(e.instance.infoLogEnabled){var i="Info/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Info)}},e.w=function(n){var i="Warning/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Warning)},e.e=function(n){var i="Error/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Error)},e.ii=function(n){if(e.instance.infoLogVerboseEnabled){var i="Verbose/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Info)}},e.d=function(n){if(e.debugEnabled){var i="Debug/"+e.Tag+": "+n;e.instance.sendNotificationMessage(i,t.Debug)}},e.prototype.sendNotificationMessage=function(e,n){switch(n){case t.Error:console.error(e);break;case t.Warning:console.warn(e);break;case t.Debug:"function"==typeof console.debug?console.debug(e):console.log(e);break;case t.Info:console.log(e)}},e.instance=new e,e.Tag="GameAnalytics",e}();e.GALogger=n})(e.logging||(e.logging={}))}(o||(o={})),function(e){(function(t){var n=e.logging.GALogger,i=function(){function e(){}return e.getHmac=function(e,t){var n=a.HmacSHA256(t,e);return a.enc.Base64.stringify(n)},e.stringMatch=function(e,t){return!(!e||!t)&&t.test(e)},e.joinStringArray=function(e,t){for(var n="",i=0,r=e.length;i<r;i++)i>0&&(n+=t),n+=e[i];return n},e.stringArrayContainsString=function(e,t){if(0===e.length)return!1;for(var n in e)if(e[n]===t)return!0;return!1},e.encode64=function(t){t=encodeURI(t);var n,i,r,o,a,s="",c=0,u=0,d=0;do{r=(n=t.charCodeAt(d++))>>2,o=(3&n)<<4|(i=t.charCodeAt(d++))>>4,a=(15&i)<<2|(c=t.charCodeAt(d++))>>6,u=63&c,isNaN(i)?a=u=64:isNaN(c)&&(u=64),s=s+e.keyStr.charAt(r)+e.keyStr.charAt(o)+e.keyStr.charAt(a)+e.keyStr.charAt(u),n=i=c=0,r=o=a=u=0}while(d<t.length);return s},e.decode64=function(t){var i,r,o,a,s="",c=0,u=0,d=0;/[^A-Za-z0-9\+\/\=]/g.exec(t)&&n.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{i=e.keyStr.indexOf(t.charAt(d++))<<2|(o=e.keyStr.indexOf(t.charAt(d++)))>>4,r=(15&o)<<4|(a=e.keyStr.indexOf(t.charAt(d++)))>>2,c=(3&a)<<6|(u=e.keyStr.indexOf(t.charAt(d++))),s+=String.fromCharCode(i),64!=a&&(s+=String.fromCharCode(r)),64!=u&&(s+=String.fromCharCode(c)),i=r=c=0,o=a=u=0}while(d<t.length);return decodeURI(s)},e.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},e.createGuid=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16)})},e.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();t.GAUtilities=i})(e.utilities||(e.utilities={}))}(o||(o={})),function(e){(function(t){var n=e.logging.GALogger,i=e.utilities.GAUtilities,r=e.events.EGASdkErrorCategory,o=e.events.EGASdkErrorArea,a=e.events.EGASdkErrorAction,s=e.events.EGASdkErrorParameter,c=function(e,t,n,i,r){this.category=e,this.area=t,this.action=n,this.parameter=i,this.reason=r};t.ValidationResult=c;var u=function(){function t(){}return t.validateBusinessEvent=function(e,i,u,d,l){return t.validateCurrency(e)?i<0?(n.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+i),new c(r.EventValidation,o.BusinessEvent,a.InvalidAmount,s.Amount,i+"")):t.validateShortString(u,!0)?t.validateEventPartLength(d,!1)?t.validateEventPartCharacters(d)?t.validateEventPartLength(l,!1)?t.validateEventPartCharacters(l)?null:(n.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+l),new c(r.EventValidation,o.BusinessEvent,a.InvalidEventPartCharacters,s.ItemId,l)):(n.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+l),new c(r.EventValidation,o.BusinessEvent,a.InvalidEventPartLength,s.ItemId,l)):(n.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+d),new c(r.EventValidation,o.BusinessEvent,a.InvalidEventPartCharacters,s.ItemType,d)):(n.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+d),new c(r.EventValidation,o.BusinessEvent,a.InvalidEventPartLength,s.ItemType,d)):(n.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+u),new c(r.EventValidation,o.BusinessEvent,a.InvalidShortString,s.CartType,u)):(n.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),new c(r.EventValidation,o.BusinessEvent,a.InvalidCurrency,s.Currency,e))},t.validateResourceEvent=function(u,d,l,f,h,p,g){return u==e.EGAResourceFlowType.Undefined?(n.w("Validation fail - resource event - flowType: Invalid flow type."),new c(r.EventValidation,o.ResourceEvent,a.InvalidFlowType,s.FlowType,"")):d?i.stringArrayContainsString(p,d)?l>0?f?t.validateEventPartLength(f,!1)?t.validateEventPartCharacters(f)?i.stringArrayContainsString(g,f)?t.validateEventPartLength(h,!1)?t.validateEventPartCharacters(h)?null:(n.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+h),new c(r.EventValidation,o.ResourceEvent,a.InvalidEventPartCharacters,s.ItemId,h)):(n.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+h),new c(r.EventValidation,o.ResourceEvent,a.InvalidEventPartLength,s.ItemId,h)):(n.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+f),new c(r.EventValidation,o.ResourceEvent,a.NotFoundInAvailableItemTypes,s.ItemType,f)):(n.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+f),new c(r.EventValidation,o.ResourceEvent,a.InvalidEventPartCharacters,s.ItemType,f)):(n.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+f),new c(r.EventValidation,o.ResourceEvent,a.InvalidEventPartLength,s.ItemType,f)):(n.w("Validation fail - resource event - itemType: Cannot be (null)"),new c(r.EventValidation,o.ResourceEvent,a.StringEmptyOrNull,s.ItemType,"")):(n.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+l),new c(r.EventValidation,o.ResourceEvent,a.InvalidAmount,s.Amount,l+"")):(n.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+d),new c(r.EventValidation,o.ResourceEvent,a.NotFoundInAvailableCurrencies,s.Currency,d)):(n.w("Validation fail - resource event - currency: Cannot be (null)"),new c(r.EventValidation,o.ResourceEvent,a.StringEmptyOrNull,s.Currency,""))},t.validateProgressionEvent=function(i,u,d,l){if(i==e.EGAProgressionStatus.Undefined)return n.w("Validation fail - progression event: Invalid progression status."),new c(r.EventValidation,o.ProgressionEvent,a.InvalidProgressionStatus,s.ProgressionStatus,"");if(l&&!d&&u)return n.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),new c(r.EventValidation,o.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,u+":"+d+":"+l);if(d&&!u)return n.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),new c(r.EventValidation,o.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,u+":"+d+":"+l);if(!u)return n.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),new c(r.EventValidation,o.ProgressionEvent,a.WrongProgressionOrder,s.Undefined,(u||"")+":"+(d||"")+":"+(l||""));if(!t.validateEventPartLength(u,!1))return n.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+u),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartLength,s.Progression01,u);if(!t.validateEventPartCharacters(u))return n.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression01,u);if(d){if(!t.validateEventPartLength(d,!0))return n.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+d),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartLength,s.Progression02,d);if(!t.validateEventPartCharacters(d))return n.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+d),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression02,d)}if(l){if(!t.validateEventPartLength(l,!0))return n.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+l),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartLength,s.Progression03,l);if(!t.validateEventPartCharacters(l))return n.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+l),new c(r.EventValidation,o.ProgressionEvent,a.InvalidEventPartCharacters,s.Progression03,l)}return null},t.validateDesignEvent=function(e){return t.validateEventIdLength(e)?t.validateEventIdCharacters(e)?null:(n.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),new c(r.EventValidation,o.DesignEvent,a.InvalidEventIdCharacters,s.EventId,e)):(n.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 64 characters or less. String: "+e),new c(r.EventValidation,o.DesignEvent,a.InvalidEventIdLength,s.EventId,e))},t.validateErrorEvent=function(i,u){return i==e.EGAErrorSeverity.Undefined?(n.w("Validation fail - error event - severity: Severity was unsupported value."),new c(r.EventValidation,o.ErrorEvent,a.InvalidSeverity,s.Severity,"")):t.validateLongString(u,!0)?null:(n.w("Validation fail - error event - message: Message cannot be above 8192 characters."),new c(r.EventValidation,o.ErrorEvent,a.InvalidLongString,s.Message,u))},t.validateAdEvent=function(i,u,d,l){return i==e.EGAAdAction.Undefined?(n.w("Validation fail - error event - severity: Severity was unsupported value."),new c(r.EventValidation,o.AdEvent,a.InvalidAdAction,s.AdAction,"")):u==e.EGAAdType.Undefined?(n.w("Validation fail - ad event - adType: Ad type was unsupported value."),new c(r.EventValidation,o.AdEvent,a.InvalidAdType,s.AdType,"")):t.validateShortString(d,!1)?t.validateString(l,!1)?null:(n.w("Validation fail - ad event - message: Ad placement cannot be above 64 characters."),new c(r.EventValidation,o.AdEvent,a.InvalidString,s.AdPlacement,l)):(n.w("Validation fail - ad event - message: Ad SDK name cannot be above 32 characters."),new c(r.EventValidation,o.AdEvent,a.InvalidShortString,s.AdSdkName,d))},t.validateSdkErrorEvent=function(e,i,s,c,u){return!(!t.validateKeys(e,i)||(s===r.Undefined?(n.w("Validation fail - sdk error event - type: Category was unsupported value."),1):c===o.Undefined?(n.w("Validation fail - sdk error event - type: Area was unsupported value."),1):u===a.Undefined&&(n.w("Validation fail - sdk error event - type: Action was unsupported value."),1)))},t.validateKeys=function(e,t){return!(!i.stringMatch(e,/^[A-z0-9]{32}$/)||!i.stringMatch(t,/^[A-z0-9]{40}$/))},t.validateCurrency=function(e){return!!e&&!!i.stringMatch(e,/^[A-Z]{3}$/)},t.validateEventPartLength=function(e,t){return!(!t||e)||!!e&&!(e.length>64)},t.validateEventPartCharacters=function(e){return!!i.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},t.validateEventIdLength=function(e){return!!e&&!!i.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},t.validateEventIdCharacters=function(e){return!!e&&!!i.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},t.validateAndCleanInitRequestResponse=function(e,t){if(null==e)return n.w("validateInitRequestResponse failed - no response dictionary."),null;var i={};try{var r=e.server_ts;if(!(r>0))return n.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;i.server_ts=r}catch(u){return n.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof e.server_ts+", value="+e.server_ts+", "+u),null}if(t){try{var o=e.configs;i.configs=o}catch(u){return n.w("validateInitRequestResponse failed - invalid type in 'configs' field. type="+typeof e.configs+", value="+e.configs+", "+u),null}try{var a=e.configs_hash;i.configs_hash=a}catch(u){return n.w("validateInitRequestResponse failed - invalid type in 'configs_hash' field. type="+typeof e.configs_hash+", value="+e.configs_hash+", "+u),null}try{var s=e.ab_id;i.ab_id=s}catch(u){return n.w("validateInitRequestResponse failed - invalid type in 'ab_id' field. type="+typeof e.ab_id+", value="+e.ab_id+", "+u),null}try{var c=e.ab_variant_id;i.ab_variant_id=c}catch(u){return n.w("validateInitRequestResponse failed - invalid type in 'ab_variant_id' field. type="+typeof e.ab_variant_id+", value="+e.ab_variant_id+", "+u),null}}return i},t.validateBuild=function(e){return!!t.validateShortString(e,!1)},t.validateSdkWrapperVersion=function(e){return!!i.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold|godot|flutter) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},t.validateEngineVersion=function(e){return!(!e||!i.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold|godot) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},t.validateUserId=function(e){return!!t.validateString(e,!1)||(n.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},t.validateShortString=function(e,t){return!(!t||e)||!(!e||e.length>32)},t.validateString=function(e,t){return!(!t||e)||!(!e||e.length>64)},t.validateLongString=function(e,t){return!(!t||e)||!(!e||e.length>8192)},t.validateConnectionType=function(e){return i.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},t.validateCustomDimensions=function(e){return t.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},t.validateResourceCurrencies=function(e){if(!t.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var r=0;r<e.length;++r)if(!i.stringMatch(e[r],/^[A-Za-z]+$/))return n.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[r]),!1;return!0},t.validateResourceItemTypes=function(e){if(!t.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var i=0;i<e.length;++i)if(!t.validateEventPartCharacters(e[i]))return n.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[i]),!1;return!0},t.validateDimension01=function(e,t){return!e||!!i.stringArrayContainsString(t,e)},t.validateDimension02=function(e,t){return!e||!!i.stringArrayContainsString(t,e)},t.validateDimension03=function(e,t){return!e||!!i.stringArrayContainsString(t,e)},t.validateArrayOfStrings=function(e,t,i,r,o){var a=r;if(a||(a="Array"),!o)return n.w(a+" validation failed: array cannot be null. "),!1;if(0==i&&0==o.length)return n.w(a+" validation failed: array cannot be empty. "),!1;if(e>0&&o.length>e)return n.w(a+" validation failed: array cannot exceed "+e+" values. It has "+o.length+" values."),!1;for(var s=0;s<o.length;++s){var c=o[s]?o[s].length:0;if(0===c)return n.w(a+" validation failed: contained an empty string. Array="+JSON.stringify(o)),!1;if(t>0&&c>t)return n.w(a+" validation failed: a string exceeded max allowed length (which is: "+t+"). String was: "+o[s]),!1}return!0},t.validateClientTs=function(e){return!(e<0||e>99999999999)},t}();t.GAValidator=u})(e.validators||(e.validators={}))}(o||(o={})),function(e){(function(e){var t=function(e,t,n){this.name=e,this.value=t,this.version=n};e.NameValueVersion=t;var n=function(e,t){this.name=e,this.version=t};e.NameVersion=n;var i=function(){function e(){}return e.touch=function(){},e.getRelevantSdkVersion=function(){return e.sdkGameEngineVersion?e.sdkGameEngineVersion:e.sdkWrapperVersion},e.getConnectionType=function(){return e.connectionType},e.updateConnectionType=function(){navigator.onLine?"ios"===e.buildPlatform||"android"===e.buildPlatform?e.connectionType="wwan":e.connectionType="lan":e.connectionType="offline"},e.getOSVersionString=function(){return e.buildPlatform+" "+e.osVersionPair.version},e.runtimePlatformToString=function(){return e.osVersionPair.name},e.getBrowserVersionString=function(){var t,n=navigator.userAgent,i=n.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==i.length&&"ios"===e.buildPlatform)return"webkit_"+e.osVersion;if(/trident/i.test(i[1]))return"IE "+((t=/\brv[ :]+(\d+)/g.exec(n)||[])[1]||"");if("Chrome"===i[1]&&null!=(t=n.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return t.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(i[1]&&"fbav"===i[1].toLowerCase()&&(i[1]="facebook",i[2]))return"facebook "+i[2];var r=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(t=n.match(/version\/(\d+)/i))&&r.splice(1,1,t[1]),r.join(" ").toLowerCase()},e.getDeviceModel=function(){return"unknown"},e.getDeviceManufacturer=function(){return"unknown"},e.matchItem=function(e,t){var i,r,o,a,s=new n("unknown","0.0.0"),c=0,u=0;for(c=0;c<t.length;c+=1)if(new RegExp(t[c].value,"i").test(e)){if(i=new RegExp(t[c].version+"[- /:;]([\\d._]+)","i"),a="",(r=e.match(i))&&r[1]&&(o=r[1]),o){var d=o.split(/[._]+/);for(u=0;u<Math.min(d.length,3);u+=1)a+=d[u]+(u<Math.min(d.length,3)-1?".":"")}else a="0.0.0";return s.name=t[c].name,s.version=a,s}return s},e.sdkWrapperVersion="javascript 4.4.5",e.osVersionPair=e.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new t("windows_phone","Windows Phone","OS"),new t("windows","Win","NT"),new t("ios","iPhone","OS"),new t("ios","iPad","OS"),new t("ios","iPod","OS"),new t("android","Android","Android"),new t("blackBerry","BlackBerry","/"),new t("mac_osx","Mac","OS X"),new t("tizen","Tizen","Tizen"),new t("linux","Linux","rv"),new t("kai_os","KAIOS","KAIOS")]),e.buildPlatform=e.runtimePlatformToString(),e.deviceModel=e.getDeviceModel(),e.deviceManufacturer=e.getDeviceManufacturer(),e.osVersion=e.getOSVersionString(),e.browserVersion=e.getBrowserVersionString(),e}();e.GADevice=i})(e.device||(e.device={}))}(o||(o={})),function(e){(function(e){var t=function(){function e(t){this.deadline=t,this.ignore=!1,this.async=!1,this.running=!1,this.id=++e.idCounter}return e.idCounter=0,e}();e.TimedBlock=t})(e.threading||(e.threading={}))}(o||(o={})),function(e){(function(e){var t=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,t){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(t)},e.prototype.addQueueOfPriority=function(e){var t=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,n){return t.comparer.compare(e,n)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return this._sortedKeys.length>0},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],t=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),t},e}();e.PriorityQueue=t})(e.threading||(e.threading={}))}(o||(o={})),function(e){(function(t){var n,i,r=e.logging.GALogger;(function(e){e[e.Equal=0]="Equal",e[e.LessOrEqual=1]="LessOrEqual",e[e.NotEqual=2]="NotEqual"})(n=t.EGAStoreArgsOperator||(t.EGAStoreArgsOperator={})),function(e){e[e.Events=0]="Events",e[e.Sessions=1]="Sessions",e[e.Progression=2]="Progression"}(i=t.EGAStore||(t.EGAStore={}));var o=function(){function e(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),e.storageAvailable=!0):e.storageAvailable=!1}catch(t){}}return e.isStorageAvailable=function(){return e.storageAvailable},e.isStoreTooLargeForEvents=function(){return e.instance.eventsStore.length+e.instance.sessionsStore.length>e.MaxNumberOfEntries},e.select=function(t,i,r,o){void 0===i&&(i=[]),void 0===r&&(r=!1),void 0===o&&(o=0);var a=e.getStore(t);if(!a)return null;for(var s=[],c=0;c<a.length;++c){for(var u=a[c],d=!0,l=0;l<i.length;++l){var f=i[l];if(u[f[0]])switch(f[1]){case n.Equal:d=u[f[0]]==f[2];break;case n.LessOrEqual:d=u[f[0]]<=f[2];break;case n.NotEqual:d=u[f[0]]!=f[2];break;default:d=!1}else d=!1;if(!d)break}d&&s.push(u)}return r&&s.sort(function(e,t){return e.client_ts-t.client_ts}),o>0&&s.length>o&&(s=s.slice(0,o+1)),s},e.update=function(t,i,r){void 0===r&&(r=[]);var o=e.getStore(t);if(!o)return!1;for(var a=0;a<o.length;++a){for(var s=o[a],c=!0,u=0;u<r.length;++u){var d=r[u];if(s[d[0]])switch(d[1]){case n.Equal:c=s[d[0]]==d[2];break;case n.LessOrEqual:c=s[d[0]]<=d[2];break;case n.NotEqual:c=s[d[0]]!=d[2];break;default:c=!1}else c=!1;if(!c)break}if(c)for(u=0;u<i.length;++u){var l=i[u];s[l[0]]=l[1]}}return!0},e.delete=function(t,i){var r=e.getStore(t);if(r)for(var o=0;o<r.length;++o){for(var a=r[o],s=!0,c=0;c<i.length;++c){var u=i[c];if(a[u[0]])switch(u[1]){case n.Equal:s=a[u[0]]==u[2];break;case n.LessOrEqual:s=a[u[0]]<=u[2];break;case n.NotEqual:s=a[u[0]]!=u[2];break;default:s=!1}else s=!1;if(!s)break}s&&(r.splice(o,1),--o)}},e.insert=function(t,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=null);var o=e.getStore(t);if(o)if(i){if(!r)return;for(var a=!1,s=0;s<o.length;++s){var c=o[s];if(c[r]==n[r]){for(var u in n)c[u]=n[u];a=!0;break}}a||o.push(n)}else o.push(n)},e.save=function(t){e.isStorageAvailable()?(localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.EventsStoreKey),JSON.stringify(e.instance.eventsStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.SessionsStoreKey),JSON.stringify(e.instance.sessionsStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.ProgressionStoreKey),JSON.stringify(e.instance.progressionStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,t,e.ItemsStoreKey),JSON.stringify(e.instance.storeItems))):r.w("Storage is not available, cannot save.")},e.load=function(t){if(e.isStorageAvailable()){try{e.instance.eventsStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.EventsStoreKey))),e.instance.eventsStore||(e.instance.eventsStore=[])}catch(n){r.w("Load failed for 'events' store. Using empty store."),e.instance.eventsStore=[]}try{e.instance.sessionsStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.SessionsStoreKey))),e.instance.sessionsStore||(e.instance.sessionsStore=[])}catch(n){r.w("Load failed for 'sessions' store. Using empty store."),e.instance.sessionsStore=[]}try{e.instance.progressionStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.ProgressionStoreKey))),e.instance.progressionStore||(e.instance.progressionStore=[])}catch(n){r.w("Load failed for 'progression' store. Using empty store."),e.instance.progressionStore=[]}try{e.instance.storeItems=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,t,e.ItemsStoreKey))),e.instance.storeItems||(e.instance.storeItems={})}catch(n){r.w("Load failed for 'items' store. Using empty store."),e.instance.progressionStore=[]}}else r.w("Storage is not available, cannot load.")},e.setItem=function(t,n,i){var r=e.StringFormat(e.KeyFormat,t,n);i?e.instance.storeItems[r]=i:r in e.instance.storeItems&&delete e.instance.storeItems[r]},e.getItem=function(t,n){var i=e.StringFormat(e.KeyFormat,t,n);return i in e.instance.storeItems?e.instance.storeItems[i]:null},e.getStore=function(t){switch(t){case i.Events:return e.instance.eventsStore;case i.Sessions:return e.instance.sessionsStore;case i.Progression:return e.instance.progressionStore;default:return r.w("GAStore.getStore(): Cannot find store: "+t),null}},e.instance=new e,e.MaxNumberOfEntries=2e3,e.StringFormat=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/{(\d+)}/g,function(e,n){return t[n]||""})},e.KeyFormat="GA::{0}::{1}",e.EventsStoreKey="ga_event",e.SessionsStoreKey="ga_session",e.ProgressionStoreKey="ga_progression",e.ItemsStoreKey="ga_items",e}();t.GAStore=o})(e.store||(e.store={}))}(o||(o={})),function(e){(function(t){var n=e.validators.GAValidator,i=e.utilities.GAUtilities,r=e.logging.GALogger,o=e.store.GAStore,a=e.device.GADevice,s=e.store.EGAStore,c=e.store.EGAStoreArgsOperator,u=function(){function e(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.currentGlobalCustomEventFields={},this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.remoteConfigsListeners=[],this.beforeUnloadListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0,this.isUnloading=!1}return e.setUserId=function(t){e.instance.userId=t,e.cacheIdentifier()},e.getIdentifier=function(){return e.instance.identifier},e.isInitialized=function(){return e.instance.initialized},e.setInitialized=function(t){e.instance.initialized=t},e.getSessionStart=function(){return e.instance.sessionStart},e.getSessionNum=function(){return e.instance.sessionNum},e.getTransactionNum=function(){return e.instance.transactionNum},e.getSessionId=function(){return e.instance.sessionId},e.getCurrentCustomDimension01=function(){return e.instance.currentCustomDimension01},e.getCurrentCustomDimension02=function(){return e.instance.currentCustomDimension02},e.getCurrentCustomDimension03=function(){return e.instance.currentCustomDimension03},e.getGameKey=function(){return e.instance.gameKey},e.getGameSecret=function(){return e.instance.gameSecret},e.getAvailableCustomDimensions01=function(){return e.instance.availableCustomDimensions01},e.setAvailableCustomDimensions01=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions01=t,e.validateAndFixCurrentDimensions(),r.i("Set available custom01 dimension values: ("+i.joinStringArray(t,", ")+")"))},e.getAvailableCustomDimensions02=function(){return e.instance.availableCustomDimensions02},e.setAvailableCustomDimensions02=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions02=t,e.validateAndFixCurrentDimensions(),r.i("Set available custom02 dimension values: ("+i.joinStringArray(t,", ")+")"))},e.getAvailableCustomDimensions03=function(){return e.instance.availableCustomDimensions03},e.setAvailableCustomDimensions03=function(t){n.validateCustomDimensions(t)&&(e.instance.availableCustomDimensions03=t,e.validateAndFixCurrentDimensions(),r.i("Set available custom03 dimension values: ("+i.joinStringArray(t,", ")+")"))},e.getAvailableResourceCurrencies=function(){return e.instance.availableResourceCurrencies},e.setAvailableResourceCurrencies=function(t){n.validateResourceCurrencies(t)&&(e.instance.availableResourceCurrencies=t,r.i("Set available resource currencies: ("+i.joinStringArray(t,", ")+")"))},e.getAvailableResourceItemTypes=function(){return e.instance.availableResourceItemTypes},e.setAvailableResourceItemTypes=function(t){n.validateResourceItemTypes(t)&&(e.instance.availableResourceItemTypes=t,r.i("Set available resource item types: ("+i.joinStringArray(t,", ")+")"))},e.getBuild=function(){return e.instance.build},e.setBuild=function(t){e.instance.build=t,r.i("Set build version: "+t)},e.getUseManualSessionHandling=function(){return e.instance.useManualSessionHandling},e.isEventSubmissionEnabled=function(){return e.instance._isEventSubmissionEnabled},e.getABTestingId=function(){return e.instance.abId},e.getABTestingVariantId=function(){return e.instance.abVariantId},e.prototype.setDefaultId=function(t){this.defaultUserId=t||"",e.cacheIdentifier()},e.getDefaultId=function(){return e.instance.defaultUserId},e.getSdkConfig=function(){var t,n=0;for(var i in e.instance.sdkConfig)0===n&&(t=i),++n;if(t&&n>0)return e.instance.sdkConfig;for(var i in n=0,e.instance.sdkConfigCached)0===n&&(t=i),++n;return t&&n>0?e.instance.sdkConfigCached:e.instance.sdkConfigDefault},e.isEnabled=function(){return!!e.instance.initAuthorized},e.setCustomDimension01=function(t){e.instance.currentCustomDimension01=t,o.setItem(e.getGameKey(),e.Dimension01Key,t),r.i("Set custom01 dimension value: "+t)},e.setCustomDimension02=function(t){e.instance.currentCustomDimension02=t,o.setItem(e.getGameKey(),e.Dimension02Key,t),r.i("Set custom02 dimension value: "+t)},e.setCustomDimension03=function(t){e.instance.currentCustomDimension03=t,o.setItem(e.getGameKey(),e.Dimension03Key,t),r.i("Set custom03 dimension value: "+t)},e.incrementSessionNum=function(){var t=e.getSessionNum()+1;e.instance.sessionNum=t},e.incrementTransactionNum=function(){var t=e.getTransactionNum()+1;e.instance.transactionNum=t},e.incrementProgressionTries=function(t){var n=e.getProgressionTries(t)+1;e.instance.progressionTries[t]=n;var i={};i.progression=t,i.tries=n,o.insert(s.Progression,i,!0,"progression")},e.getProgressionTries=function(t){return t in e.instance.progressionTries?e.instance.progressionTries[t]:0},e.clearProgressionTries=function(t){t in e.instance.progressionTries&&delete e.instance.progressionTries[t];var n=[];n.push(["progression",c.Equal,t]),o.delete(s.Progression,n)},e.setKeys=function(t,n){e.instance.gameKey=t,e.instance.gameSecret=n},e.setManualSessionHandling=function(t){e.instance.useManualSessionHandling=t,r.i("Use manual session handling: "+t)},e.setEnabledEventSubmission=function(t){e.instance._isEventSubmissionEnabled=t},e.getEventAnnotations=function(){var t={v:2};t.event_uuid=i.createGuid(),t.user_id=e.instance.identifier,t.client_ts=e.getClientTsAdjusted(),t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.manufacturer=a.deviceManufacturer,t.device=a.deviceModel,t.browser_version=a.browserVersion,t.platform=a.buildPlatform,t.session_id=e.instance.sessionId,t[e.SessionNumKey]=e.instance.sessionNum;var r=a.getConnectionType();if(n.validateConnectionType(r)&&(t.connection_type=r),a.gameEngineVersion&&(t.engine_version=a.gameEngineVersion),e.instance.configurations){var o=0;for(var s in e.instance.configurations){o++;break}o>0&&(t.configurations=e.instance.configurations)}return e.instance.abId&&(t.ab_id=e.instance.abId),e.instance.abVariantId&&(t.ab_variant_id=e.instance.abVariantId),e.instance.build&&(t.build=e.instance.build),t},e.getSdkErrorEventAnnotations=function(){var t={v:2};t.event_uuid=i.createGuid(),t.category=e.CategorySdkError,t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.manufacturer=a.deviceManufacturer,t.device=a.deviceModel,t.platform=a.buildPlatform;var r=a.getConnectionType();return n.validateConnectionType(r)&&(t.connection_type=r),a.gameEngineVersion&&(t.engine_version=a.gameEngineVersion),t},e.getInitAnnotations=function(){var t={};return e.getIdentifier()||e.cacheIdentifier(),o.setItem(e.getGameKey(),e.LastUsedIdentifierKey,e.getIdentifier()),t.user_id=e.getIdentifier(),t.sdk_version=a.getRelevantSdkVersion(),t.os_version=a.osVersion,t.platform=a.buildPlatform,e.getBuild()?t.build=e.getBuild():t.build=null,t.session_num=e.getSessionNum(),t.random_salt=e.getSessionNum(),t},e.getClientTsAdjusted=function(){var t=i.timeIntervalSince1970(),r=t+e.instance.clientServerTimeOffset;return n.validateClientTs(r)?r:t},e.sessionIsStarted=function(){return 0!=e.instance.sessionStart},e.cacheIdentifier=function(){e.instance.userId?e.instance.identifier=e.instance.userId:e.instance.defaultUserId&&(e.instance.identifier=e.instance.defaultUserId)},e.ensurePersistedStates=function(){o.isStorageAvailable()&&o.load(e.getGameKey());var t=e.instance;t.setDefaultId(null!=o.getItem(e.getGameKey(),e.DefaultUserIdKey)?o.getItem(e.getGameKey(),e.DefaultUserIdKey):i.createGuid()),t.sessionNum=null!=o.getItem(e.getGameKey(),e.SessionNumKey)?Number(o.getItem(e.getGameKey(),e.SessionNumKey)):0,t.transactionNum=null!=o.getItem(e.getGameKey(),e.TransactionNumKey)?Number(o.getItem(e.getGameKey(),e.TransactionNumKey)):0,t.currentCustomDimension01?o.setItem(e.getGameKey(),e.Dimension01Key,t.currentCustomDimension01):(t.currentCustomDimension01=null!=o.getItem(e.getGameKey(),e.Dimension01Key)?o.getItem(e.getGameKey(),e.Dimension01Key):"",t.currentCustomDimension01),t.currentCustomDimension02?o.setItem(e.getGameKey(),e.Dimension02Key,t.currentCustomDimension02):(t.currentCustomDimension02=null!=o.getItem(e.getGameKey(),e.Dimension02Key)?o.getItem(e.getGameKey(),e.Dimension02Key):"",t.currentCustomDimension02),t.currentCustomDimension03?o.setItem(e.getGameKey(),e.Dimension03Key,t.currentCustomDimension03):(t.currentCustomDimension03=null!=o.getItem(e.getGameKey(),e.Dimension03Key)?o.getItem(e.getGameKey(),e.Dimension03Key):"",t.currentCustomDimension03);var n=null!=o.getItem(e.getGameKey(),e.SdkConfigCachedKey)?o.getItem(e.getGameKey(),e.SdkConfigCachedKey):"";if(n){var a=JSON.parse(i.decode64(n));if(a){var c=o.getItem(e.getGameKey(),e.LastUsedIdentifierKey);null!=c&&c!=e.getIdentifier()&&(r.w("New identifier spotted compared to last one used, clearing cached configs hash!!"),a.configs_hash&&delete a.configs_hash),t.sdkConfigCached=a}}var u=e.getSdkConfig();t.configsHash=u.configs_hash?u.configs_hash:"",t.abId=u.ab_id?u.ab_id:"",t.abVariantId=u.ab_variant_id?u.ab_variant_id:"";var d=o.select(s.Progression);if(d)for(var l=0;l<d.length;++l){var f=d[l];f&&(t.progressionTries[f.progression]=f.tries)}},e.calculateServerTimeOffset=function(e){return e-i.timeIntervalSince1970()},e.formatString=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=new RegExp("\\{"+i+"\\}","gi");n=n.replace(r,arguments[i])}return n},e.validateAndCleanCustomFields=function(t,n){void 0===n&&(n=null);var o={};if(t){var a=0;for(var s in t){var c=t[s];if(s&&c)if(a<e.MAX_CUSTOM_FIELDS_COUNT){var u=new RegExp("^[a-zA-Z0-9_]{1,"+e.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(i.stringMatch(s,u)){var d=typeof c;if("string"===d||c instanceof String){var l=c;l.length<=e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&l.length>0?(o[s]=l,++a):(h="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its value is an empty string or exceeds the max number of characters ("+e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")",p=e.formatString(h,[s,c]),r.w(p),n&&n(h,p))}else if("number"===d||c instanceof Number){var f=c;o[s]=f,++a}else h="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its value is not a string or number",p=e.formatString(h,[s,c]),r.w(p),n&&n(h,p)}else h="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+e.MAX_CUSTOM_FIELDS_KEY_LENGTH+")",p=e.formatString(h,[s,c]),r.w(p),n&&n(h,p)}else h="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because it exceeds the max number of custom fields ("+e.MAX_CUSTOM_FIELDS_COUNT+")",p=e.formatString(h,[s,c]),r.w(p),n&&n(h,p);else{var h="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its key or value is null",p=e.formatString(h,[s,c]);r.w(p),n&&n(h,p)}}}return o},e.validateAndFixCurrentDimensions=function(){n.validateDimension01(e.getCurrentCustomDimension01(),e.getAvailableCustomDimensions01())||e.setCustomDimension01(""),n.validateDimension02(e.getCurrentCustomDimension02(),e.getAvailableCustomDimensions02())||e.setCustomDimension02(""),n.validateDimension03(e.getCurrentCustomDimension03(),e.getAvailableCustomDimensions03())||e.setCustomDimension03("")},e.getConfigurationStringValue=function(t,n){return e.instance.configurations[t]?e.instance.configurations[t].toString():n},e.isRemoteConfigsReady=function(){return e.instance.remoteConfigsIsReady},e.addRemoteConfigsListener=function(t){e.instance.remoteConfigsListeners.indexOf(t)<0&&e.instance.remoteConfigsListeners.push(t)},e.removeRemoteConfigsListener=function(t){var n=e.instance.remoteConfigsListeners.indexOf(t);n>-1&&e.instance.remoteConfigsListeners.splice(n,1)},e.getRemoteConfigsContentAsString=function(){return JSON.stringify(e.instance.configurations)},e.populateConfigurations=function(t){var n=t.configs;if(n){e.instance.configurations={};for(var i=0;i<n.length;++i){var r=n[i];if(r){var o=r.key,a=r.value,s=r.start_ts?r.start_ts:Number.MIN_VALUE,c=r.end_ts?r.end_ts:Number.MAX_VALUE,u=e.getClientTsAdjusted();o&&a&&u>s&&u<c&&(e.instance.configurations[o]=a)}}}e.instance.remoteConfigsIsReady=!0;var d=e.instance.remoteConfigsListeners;for(i=0;i<d.length;++i)d[i]&&d[i].onRemoteConfigsUpdated()},e.addOnBeforeUnloadListener=function(t){e.instance.beforeUnloadListeners.indexOf(t)<0&&e.instance.beforeUnloadListeners.push(t)},e.removeOnBeforeUnloadListener=function(t){var n=e.instance.beforeUnloadListeners.indexOf(t);n>-1&&e.instance.beforeUnloadListeners.splice(n,1)},e.notifyBeforeUnloadListeners=function(){for(var t=e.instance.beforeUnloadListeners,n=0;n<t.length;++n)t[n]&&t[n].onBeforeUnload()},e.CategorySdkError="sdk_error",e.MAX_CUSTOM_FIELDS_COUNT=50,e.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,e.instance=new e,e.DefaultUserIdKey="default_user_id",e.SessionNumKey="session_num",e.TransactionNumKey="transaction_num",e.Dimension01Key="dimension01",e.Dimension02Key="dimension02",e.Dimension03Key="dimension03",e.SdkConfigCachedKey="sdk_config_cached",e.LastUsedIdentifierKey="last_used_identifier",e}();t.GAState=u})(e.state||(e.state={}))}(o||(o={})),function(e){(function(t){var n=e.utilities.GAUtilities,i=e.logging.GALogger,r=function(){function e(){}return e.execute=function(t,r,o,a){var s=new Date;if(e.timestampMap[r]||(e.timestampMap[r]=s),e.countMap[r]||(e.countMap[r]=0),(s.getTime()-e.timestampMap[r].getTime())/1e3>=3600&&(e.timestampMap[r]=s,e.countMap[r]=0),!(e.countMap[r]>=e.MaxCount)){var c=n.getHmac(a,o),u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState){if(!u.responseText)return;if(200!=u.status)return void i.w("sdk error failed. response code not 200. status code: "+u.status+", description: "+u.statusText+", body: "+u.responseText);e.countMap[r]=e.countMap[r]+1}},u.open("POST",t,!0),u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("Authorization",c);try{u.send(o)}catch(d){console.error(d)}}},e.MaxCount=10,e.countMap={},e.timestampMap={},e}();t.SdkErrorTask=r})(e.tasks||(e.tasks={}))}(o||(o={})),function(e){(function(t){var n=e.state.GAState,i=e.logging.GALogger,r=e.utilities.GAUtilities,o=e.validators.GAValidator,a=e.tasks.SdkErrorTask,s=e.events.EGASdkErrorCategory,c=e.events.EGASdkErrorArea,u=e.events.EGASdkErrorAction,d=e.events.EGASdkErrorParameter,l=function(){function e(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.remoteConfigsVersion="v1",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.remoteConfigsBaseUrl=this.protocol+"://"+this.hostName+"/remote_configs/"+this.remoteConfigsVersion,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return e.prototype.requestInit=function(i,r){var o=n.getGameKey(),a=this.remoteConfigsBaseUrl+"/"+this.initializeUrlPath+"?game_key="+o+"&interval_seconds=0&configs_hash="+i,s=n.getInitAnnotations(),c=JSON.stringify(s);if(c){var u=this.createPayloadData(c,this.useGzip),d=[];d.push(c),e.sendRequest(a,u,d,this.useGzip,e.initRequestCallback,r)}else r(t.EGAHTTPApiResponse.JsonEncodeFailed,null)},e.prototype.sendEventsInArray=function(i,r,o){if(0!=i.length){var a=n.getGameKey(),s=this.baseUrl+"/"+a+"/"+this.eventsUrlPath,c=JSON.stringify(i);if(c){var u=this.createPayloadData(c,this.useGzip),d=[];d.push(c),d.push(r),d.push(i.length.toString()),e.sendRequest(s,u,d,this.useGzip,e.sendEventInArrayRequestCallback,o)}else o(t.EGAHTTPApiResponse.JsonEncodeFailed,null,r,i.length)}},e.prototype.sendSdkErrorEvent=function(t,r,s,c,u,d,l){if(n.isEventSubmissionEnabled()&&o.validateSdkErrorEvent(d,l,t,r,s)){var f,h=this.baseUrl+"/"+d+"/"+this.eventsUrlPath,p="",g=n.getSdkErrorEventAnnotations(),v=e.sdkErrorCategoryString(t);g.error_category=v,p+=v;var m=e.sdkErrorAreaString(r);g.error_area=m,p+=":"+m;var y=e.sdkErrorActionString(s);g.error_action=y;var _=e.sdkErrorParameterString(c);if(_.length>0&&(g.error_parameter=_),u.length>0){var S=u;u.length>e.MAX_ERROR_MESSAGE_LENGTH&&(S=u.substring(0,e.MAX_ERROR_MESSAGE_LENGTH)),g.reason=S}var E=[];E.push(g),(f=JSON.stringify(E))?a.execute(h,p,f,l):i.w("sendSdkErrorEvent: JSON encoding failed.")}},e.sendEventInArrayRequestCallback=function(i,r,o,a){void 0===a&&(a=null),a[0],a[1];var l,f,h=a[2],p=parseInt(a[3]);l=i.responseText,f=i.status;var g=e.instance.processRequestResponse(f,i.statusText,l,"Events");if(g==t.EGAHTTPApiResponse.Ok||g==t.EGAHTTPApiResponse.Created||g==t.EGAHTTPApiResponse.BadRequest){var v=l?JSON.parse(l):{};if(null==v)return o(t.EGAHTTPApiResponse.JsonDecodeFailed,null,h,p),void e.instance.sendSdkErrorEvent(s.Http,c.EventsHttp,u.FailHttpJsonDecode,d.Undefined,l,n.getGameKey(),n.getGameSecret());t.EGAHTTPApiResponse.BadRequest,o(g,v,h,p)}else o(g,null,h,p)},e.sendRequest=function(e,t,i,o,a,s){var c=new XMLHttpRequest,u=n.getGameSecret(),d=r.getHmac(u,t),l=[];for(var f in l.push(d),i)l.push(i[f]);if(c.onreadystatechange=function(){4===c.readyState&&a(c,e,s,l)},c.open("POST",e,!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Authorization",d),o)throw new Error("gzip not supported");try{c.send(t)}catch(h){console.error(h.stack)}},e.initRequestCallback=function(i,r,a,l){var f,h;void 0===l&&(l=null),l[0],l[1],f=i.responseText,h=i.status;var p=f?JSON.parse(f):{},g=e.instance.processRequestResponse(h,i.statusText,f,"Init");if(g==t.EGAHTTPApiResponse.Ok||g==t.EGAHTTPApiResponse.Created||g==t.EGAHTTPApiResponse.BadRequest){if(null==p)return a(t.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0),void e.instance.sendSdkErrorEvent(s.Http,c.InitHttp,u.FailHttpJsonDecode,d.Undefined,f,n.getGameKey(),n.getGameSecret());if(g!==t.EGAHTTPApiResponse.BadRequest){var v=o.validateAndCleanInitRequestResponse(p,g===t.EGAHTTPApiResponse.Created);v?a(g,v,"",0):a(t.EGAHTTPApiResponse.BadResponse,null,"",0)}else a(g,null,"",0)}else a(g,null,"",0)},e.prototype.createPayloadData=function(e,t){if(t)throw new Error("gzip not supported");return e},e.prototype.processRequestResponse=function(e,n,i){return i?200===e?t.EGAHTTPApiResponse.Ok:201===e?t.EGAHTTPApiResponse.Created:0===e||401===e?t.EGAHTTPApiResponse.Unauthorized:400===e?t.EGAHTTPApiResponse.BadRequest:500===e?t.EGAHTTPApiResponse.InternalServerError:t.EGAHTTPApiResponse.UnknownResponseCode:t.EGAHTTPApiResponse.NoResponse},e.sdkErrorCategoryString=function(e){switch(e){case s.EventValidation:return"event_validation";case s.Database:return"db";case s.Init:return"init";case s.Http:return"http";case s.Json:return"json"}return""},e.sdkErrorAreaString=function(e){switch(e){case c.BusinessEvent:return"business";case c.ResourceEvent:return"resource";case c.ProgressionEvent:return"progression";case c.DesignEvent:return"design";case c.ErrorEvent:return"error";case c.InitHttp:return"init_http";case c.EventsHttp:return"events_http";case c.ProcessEvents:return"process_events";case c.AddEventsToStore:return"add_events_to_store"}return""},e.sdkErrorActionString=function(e){switch(e){case u.InvalidCurrency:return"invalid_currency";case u.InvalidShortString:return"invalid_short_string";case u.InvalidEventPartLength:return"invalid_event_part_length";case u.InvalidEventPartCharacters:return"invalid_event_part_characters";case u.InvalidStore:return"invalid_store";case u.InvalidFlowType:return"invalid_flow_type";case u.StringEmptyOrNull:return"string_empty_or_null";case u.NotFoundInAvailableCurrencies:return"not_found_in_available_currencies";case u.InvalidAmount:return"invalid_amount";case u.NotFoundInAvailableItemTypes:return"not_found_in_available_item_types";case u.WrongProgressionOrder:return"wrong_progression_order";case u.InvalidEventIdLength:return"invalid_event_id_length";case u.InvalidEventIdCharacters:return"invalid_event_id_characters";case u.InvalidProgressionStatus:return"invalid_progression_status";case u.InvalidSeverity:return"invalid_severity";case u.InvalidLongString:return"invalid_long_string";case u.DatabaseTooLarge:return"db_too_large";case u.DatabaseOpenOrCreate:return"db_open_or_create";case u.JsonError:return"json_error";case u.FailHttpJsonDecode:return"fail_http_json_decode";case u.FailHttpJsonEncode:return"fail_http_json_encode"}return""},e.sdkErrorParameterString=function(e){switch(e){case d.Currency:return"currency";case d.CartType:return"cart_type";case d.ItemType:return"item_type";case d.ItemId:return"item_id";case d.Store:return"store";case d.FlowType:return"flow_type";case d.Amount:return"amount";case d.Progression01:return"progression01";case d.Progression02:return"progression02";case d.Progression03:return"progression03";case d.EventId:return"event_id";case d.ProgressionStatus:return"progression_status";case d.Severity:return"severity";case d.Message:return"message"}return""},e.instance=new e,e.MAX_ERROR_MESSAGE_LENGTH=256,e}();t.GAHTTPApi=l})(e.http||(e.http={}))}(o||(o={})),function(e){var t,n,i,r,o,a,s,c,u,d,l;t=e.events||(e.events={}),n=e.store.GAStore,i=e.store.EGAStore,r=e.store.EGAStoreArgsOperator,o=e.state.GAState,a=e.logging.GALogger,s=e.utilities.GAUtilities,c=e.http.EGAHTTPApiResponse,u=e.http.GAHTTPApi,d=e.validators.GAValidator,l=function(){function l(){}return l.customEventFieldsErrorCallback=function(t,n){if(o.isEventSubmissionEnabled()){var i=new Date;l.timestampMap[t]||(l.timestampMap[t]=i),l.countMap[t]||(l.countMap[t]=0),(i.getTime()-l.timestampMap[t].getTime())/1e3>=3600&&(l.timestampMap[t]=i,l.countMap[t]=0),l.countMap[t]>=l.MAX_ERROR_COUNT||e.threading.GAThreading.performTaskOnGAThread(function(){l.addErrorEvent(e.EGAErrorSeverity.Warning,n,null,!0),l.countMap[t]=l.countMap[t]+1})}},l.addSessionStartEvent=function(){if(o.isEventSubmissionEnabled()){var e={};e.category=l.CategorySessionStart,o.incrementSessionNum(),n.setItem(o.getGameKey(),o.SessionNumKey,o.getSessionNum().toString()),l.addDimensionsToEvent(e);var t=o.instance.currentGlobalCustomEventFields;l.addCustomFieldsToEvent(e,o.validateAndCleanCustomFields(t,l.customEventFieldsErrorCallback)),l.addEventToStore(e),a.i("Add SESSION START event"),l.processEvents(l.CategorySessionStart,!1)}},l.addSessionEndEvent=function(){if(o.isEventSubmissionEnabled()){var e=o.getSessionStart(),t=o.getClientTsAdjusted()-e;t<0&&(a.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),t=0);var n={};n.category=l.CategorySessionEnd,n.length=t,l.addDimensionsToEvent(n);var i=o.instance.currentGlobalCustomEventFields;l.addCustomFieldsToEvent(n,o.validateAndCleanCustomFields(i,l.customEventFieldsErrorCallback)),l.addEventToStore(n),a.i("Add SESSION END event."),l.processEvents("",!1)}},l.addBusinessEvent=function(e,t,i,r,s,c,f){if(void 0===s&&(s=null),o.isEventSubmissionEnabled()){var h=d.validateBusinessEvent(e,t,s,i,r);if(null==h){var p={};o.incrementTransactionNum(),n.setItem(o.getGameKey(),o.TransactionNumKey,o.getTransactionNum().toString()),p.event_id=i+":"+r,p.category=l.CategoryBusiness,p.currency=e,p.amount=t,p[o.TransactionNumKey]=o.getTransactionNum(),s&&(p.cart_type=s),l.addDimensionsToEvent(p);var g={};if(c&&Object.keys(c).length>0)for(var v in c)g[v]=c[v];else for(var v in o.instance.currentGlobalCustomEventFields)g[v]=o.instance.currentGlobalCustomEventFields[v];if(f&&c&&Object.keys(c).length>0)for(var v in o.instance.currentGlobalCustomEventFields)g[v]||(g[v]=o.instance.currentGlobalCustomEventFields[v]);l.addCustomFieldsToEvent(p,o.validateAndCleanCustomFields(g,l.customEventFieldsErrorCallback)),a.i("Add BUSINESS event: {currency:"+e+", amount:"+t+", itemType:"+i+", itemId:"+r+", cartType:"+s+"}"),l.addEventToStore(p)}else u.instance.sendSdkErrorEvent(h.category,h.area,h.action,h.parameter,h.reason,o.getGameKey(),o.getGameSecret())}},l.addResourceEvent=function(t,n,i,r,s,c,f){if(o.isEventSubmissionEnabled()){var h=d.validateResourceEvent(t,n,i,r,s,o.getAvailableResourceCurrencies(),o.getAvailableResourceItemTypes());if(null==h){t===e.EGAResourceFlowType.Sink&&(i*=-1);var p={},g=l.resourceFlowTypeToString(t);p.event_id=g+":"+n+":"+r+":"+s,p.category=l.CategoryResource,p.amount=i,l.addDimensionsToEvent(p);var v={};if(c&&Object.keys(c).length>0)for(var m in c)v[m]=c[m];else for(var m in o.instance.currentGlobalCustomEventFields)v[m]=o.instance.currentGlobalCustomEventFields[m];if(f&&c&&Object.keys(c).length>0)for(var m in o.instance.currentGlobalCustomEventFields)v[m]||(v[m]=o.instance.currentGlobalCustomEventFields[m]);l.addCustomFieldsToEvent(p,o.validateAndCleanCustomFields(v,l.customEventFieldsErrorCallback)),a.i("Add RESOURCE event: {currency:"+n+", amount:"+i+", itemType:"+r+", itemId:"+s+"}"),l.addEventToStore(p)}else u.instance.sendSdkErrorEvent(h.category,h.area,h.action,h.parameter,h.reason,o.getGameKey(),o.getGameSecret())}},l.addProgressionEvent=function(t,n,i,r,s,c,f,h){if(o.isEventSubmissionEnabled()){var p=l.progressionStatusToString(t),g=d.validateProgressionEvent(t,n,i,r);if(null==g){var v,m={};v=i?r?n+":"+i+":"+r:n+":"+i:n,m.category=l.CategoryProgression,m.event_id=p+":"+v;var y=0;c&&t!=e.EGAProgressionStatus.Start&&(m.score=Math.round(s)),t===e.EGAProgressionStatus.Fail&&o.incrementProgressionTries(v),t===e.EGAProgressionStatus.Complete&&(o.incrementProgressionTries(v),y=o.getProgressionTries(v),m.attempt_num=y,o.clearProgressionTries(v)),l.addDimensionsToEvent(m);var _={};if(f&&Object.keys(f).length>0)for(var S in f)_[S]=f[S];else for(var S in o.instance.currentGlobalCustomEventFields)_[S]=o.instance.currentGlobalCustomEventFields[S];if(h&&f&&Object.keys(f).length>0)for(var S in o.instance.currentGlobalCustomEventFields)_[S]||(_[S]=o.instance.currentGlobalCustomEventFields[S]);l.addCustomFieldsToEvent(m,o.validateAndCleanCustomFields(_,l.customEventFieldsErrorCallback)),a.i("Add PROGRESSION event: {status:"+p+", progression01:"+n+", progression02:"+i+", progression03:"+r+", score:"+s+", attempt:"+y+"}"),l.addEventToStore(m)}else u.instance.sendSdkErrorEvent(g.category,g.area,g.action,g.parameter,g.reason,o.getGameKey(),o.getGameSecret())}},l.addDesignEvent=function(e,t,n,i,r){if(o.isEventSubmissionEnabled()){var s=d.validateDesignEvent(e);if(null==s){var c={};c.category=l.CategoryDesign,c.event_id=e,n&&(c.value=t),l.addDimensionsToEvent(c);var f={};if(i&&Object.keys(i).length>0)for(var h in i)f[h]=i[h];else for(var h in o.instance.currentGlobalCustomEventFields)f[h]=o.instance.currentGlobalCustomEventFields[h];if(r&&i&&Object.keys(i).length>0)for(var h in o.instance.currentGlobalCustomEventFields)f[h]||(f[h]=o.instance.currentGlobalCustomEventFields[h]);l.addCustomFieldsToEvent(c,o.validateAndCleanCustomFields(f,l.customEventFieldsErrorCallback)),a.i("Add DESIGN event: {eventId:"+e+", value:"+t+"}"),l.addEventToStore(c)}else u.instance.sendSdkErrorEvent(s.category,s.area,s.action,s.parameter,s.reason,o.getGameKey(),o.getGameSecret())}},l.addErrorEvent=function(e,t,n,i,r){if(void 0===r&&(r=!1),o.isEventSubmissionEnabled()){var s=l.errorSeverityToString(e),c=d.validateErrorEvent(e,t);if(null==c){var f={};if(f.category=l.CategoryError,f.severity=s,f.message=t,l.addDimensionsToEvent(f),!r){var h={};if(n&&Object.keys(n).length>0)for(var p in n)h[p]=n[p];else for(var p in o.instance.currentGlobalCustomEventFields)h[p]=o.instance.currentGlobalCustomEventFields[p];if(i&&n&&Object.keys(n).length>0)for(var p in o.instance.currentGlobalCustomEventFields)h[p]||(h[p]=o.instance.currentGlobalCustomEventFields[p]);l.addCustomFieldsToEvent(f,o.validateAndCleanCustomFields(h,l.customEventFieldsErrorCallback))}a.i("Add ERROR event: {severity:"+s+", message:"+t+"}"),l.addEventToStore(f)}else u.instance.sendSdkErrorEvent(c.category,c.area,c.action,c.parameter,c.reason,o.getGameKey(),o.getGameSecret())}},l.addAdEvent=function(t,n,i,r,s,c,f,h,p){if(o.isEventSubmissionEnabled()){var g=l.adActionToString(t),v=l.adTypeToString(n),m=l.adErrorToString(s),y=d.validateAdEvent(t,n,i,r);if(null==y){var _={};_.category=l.CategoryAds,_.ad_sdk_name=i,_.ad_placement=r,_.ad_type=v,_.ad_action=g,t==e.EGAAdAction.FailedShow&&m.length>0&&(_.ad_fail_show_reason=m),!f||n!=e.EGAAdType.RewardedVideo&&n!=e.EGAAdType.Video||(_.ad_duration=c),l.addDimensionsToEvent(_);var S={};if(h&&Object.keys(h).length>0)for(var E in h)S[E]=h[E];else for(var E in o.instance.currentGlobalCustomEventFields)S[E]=o.instance.currentGlobalCustomEventFields[E];if(p&&h&&Object.keys(h).length>0)for(var E in o.instance.currentGlobalCustomEventFields)S[E]||(S[E]=o.instance.currentGlobalCustomEventFields[E]);l.addCustomFieldsToEvent(_,o.validateAndCleanCustomFields(S,l.customEventFieldsErrorCallback)),a.i("Add AD event: {ad_sdk_name:"+i+", ad_placement:"+r+", ad_type:"+v+", ad_action:"+g+(t==e.EGAAdAction.FailedShow&&m.length>0?", ad_fail_show_reason:"+m:"")+(!f||n!=e.EGAAdType.RewardedVideo&&n!=e.EGAAdType.Video?"":", ad_duration:"+c)+"}"),l.addEventToStore(_)}else u.instance.sendSdkErrorEvent(y.category,y.area,y.action,y.parameter,y.reason,o.getGameKey(),o.getGameSecret())}},l.processEvents=function(e,c){if(o.isEventSubmissionEnabled())try{var f=s.createGuid();c&&(l.cleanupEvents(),l.fixMissingSessionEndEvents());var h=[];h.push(["status",r.Equal,"new"]);var p=[];p.push(["status",r.Equal,"new"]),e&&(h.push(["category",r.Equal,e]),p.push(["category",r.Equal,e]));var g=[];g.push(["status",f]);var v=n.select(i.Events,h);if(!v||0==v.length)return a.i("Event queue: No events to send"),void l.updateSessionStore();if(v.length>l.MaxEventCount){if(!(v=n.select(i.Events,h,!0,l.MaxEventCount)))return;var m=v[v.length-1].client_ts;if(h.push(["client_ts",r.LessOrEqual,m]),!(v=n.select(i.Events,h)))return;p.push(["client_ts",r.LessOrEqual,m])}if(a.i("Event queue: Sending "+v.length+" events."),!n.update(i.Events,g,p))return;for(var y=[],_=0;_<v.length;++_){var S=v[_],E=JSON.parse(s.decode64(S.event));if(0!=E.length){var b=E.client_ts;b&&!d.validateClientTs(b)&&delete E.client_ts,y.push(E)}}u.instance.sendEventsInArray(y,f,l.processEventsCallback)}catch(A){a.e("Error during ProcessEvents(): "+A.stack),u.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Json,t.EGASdkErrorArea.ProcessEvents,t.EGASdkErrorAction.JsonError,t.EGASdkErrorParameter.Undefined,A.stack,o.getGameKey(),o.getGameSecret())}},l.processEventsCallback=function(e,t,o,s){var u=[];if(u.push(["status",r.Equal,o]),e===c.Ok)n.delete(i.Events,u),a.i("Event queue: "+s+" events sent.");else if(e===c.NoResponse){var d=[];d.push(["status","new"]),a.w("Event queue: Failed to send events to collector - Retrying next time"),n.update(i.Events,d,u)}else{if(t){var l,f=0;for(var h in t)0==f&&(l=t[h]),++f;e===c.BadRequest&&l.constructor===Array?a.w("Event queue: "+s+" events sent. "+f+" events failed GA server validation."):a.w("Event queue: Failed to send events.")}else a.w("Event queue: Failed to send events.");n.delete(i.Events,u)}},l.cleanupEvents=function(){n.update(i.Events,[["status","new"]])},l.fixMissingSessionEndEvents=function(){if(o.isEventSubmissionEnabled()){var e=[];e.push(["session_id",r.NotEqual,o.getSessionId()]);var t=n.select(i.Sessions,e);if(t&&0!=t.length){a.i(t.length+" session(s) located with missing session_end event.");for(var c=0;c<t.length;++c){var u=JSON.parse(s.decode64(t[c].event)),d=u.client_ts-t[c].timestamp;d=Math.max(0,d),u.category=l.CategorySessionEnd,u.length=d,l.addEventToStore(u)}}}},l.addEventToStore=function(e){if(o.isEventSubmissionEnabled())if(o.isInitialized())try{if(n.isStoreTooLargeForEvents()&&!s.stringMatch(e.category,/^(user|session_end|business)$/))return a.w("Database too large. Event has been blocked."),void u.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Database,t.EGASdkErrorArea.AddEventsToStore,t.EGASdkErrorAction.DatabaseTooLarge,t.EGASdkErrorParameter.Undefined,"",o.getGameKey(),o.getGameSecret());var c=o.getEventAnnotations();for(var d in e)c[d]=e[d];var f=JSON.stringify(c);a.ii("Event added to queue: "+f);var h={status:"new"};h.category=c.category,h.session_id=c.session_id,h.client_ts=c.client_ts,h.event=s.encode64(JSON.stringify(c)),n.insert(i.Events,h),e.category==l.CategorySessionEnd?n.delete(i.Sessions,[["session_id",r.Equal,c.session_id]]):l.updateSessionStore(),n.isStorageAvailable()&&n.save(o.getGameKey())}catch(d){a.e("addEventToStore: error"),a.e(d.stack),u.instance.sendSdkErrorEvent(t.EGASdkErrorCategory.Database,t.EGASdkErrorArea.AddEventsToStore,t.EGASdkErrorAction.DatabaseTooLarge,t.EGASdkErrorParameter.Undefined,d.stack,o.getGameKey(),o.getGameSecret())}else a.w("Could not add event: SDK is not initialized")},l.updateSessionStore=function(){if(o.sessionIsStarted()){var e={};e.session_id=o.instance.sessionId,e.timestamp=o.getSessionStart();var t=o.getEventAnnotations();l.addDimensionsToEvent(t);var r=o.instance.currentGlobalCustomEventFields;l.addCustomFieldsToEvent(t,o.validateAndCleanCustomFields(r,l.customEventFieldsErrorCallback)),e.event=s.encode64(JSON.stringify(t)),n.insert(i.Sessions,e,!0,"session_id"),n.isStorageAvailable()&&n.save(o.getGameKey())}},l.addDimensionsToEvent=function(e){e&&(o.getCurrentCustomDimension01()&&(e.custom_01=o.getCurrentCustomDimension01()),o.getCurrentCustomDimension02()&&(e.custom_02=o.getCurrentCustomDimension02()),o.getCurrentCustomDimension03()&&(e.custom_03=o.getCurrentCustomDimension03()))},l.addCustomFieldsToEvent=function(e,t){e&&t&&Object.keys(t).length>0&&(e.custom_fields=t)},l.resourceFlowTypeToString=function(t){return t==e.EGAResourceFlowType.Source||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Source]?"Source":t==e.EGAResourceFlowType.Sink||t==e.EGAResourceFlowType[e.EGAResourceFlowType.Sink]?"Sink":""},l.progressionStatusToString=function(t){return t==e.EGAProgressionStatus.Start||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Start]?"Start":t==e.EGAProgressionStatus.Complete||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Complete]?"Complete":t==e.EGAProgressionStatus.Fail||t==e.EGAProgressionStatus[e.EGAProgressionStatus.Fail]?"Fail":""},l.errorSeverityToString=function(t){return t==e.EGAErrorSeverity.Debug||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Debug]?"debug":t==e.EGAErrorSeverity.Info||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Info]?"info":t==e.EGAErrorSeverity.Warning||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Warning]?"warning":t==e.EGAErrorSeverity.Error||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Error]?"error":t==e.EGAErrorSeverity.Critical||t==e.EGAErrorSeverity[e.EGAErrorSeverity.Critical]?"critical":""},l.adActionToString=function(t){return t==e.EGAAdAction.Clicked||t==e.EGAAdAction[e.EGAAdAction.Clicked]?"clicked":t==e.EGAAdAction.Show||t==e.EGAAdAction[e.EGAAdAction.Show]?"show":t==e.EGAAdAction.FailedShow||t==e.EGAAdAction[e.EGAAdAction.FailedShow]?"failed_show":t==e.EGAAdAction.RewardReceived||t==e.EGAAdAction[e.EGAAdAction.RewardReceived]?"reward_received":""},l.adErrorToString=function(t){return t==e.EGAAdError.Unknown||t==e.EGAAdError[e.EGAAdError.Unknown]?"unknown":t==e.EGAAdError.Offline||t==e.EGAAdError[e.EGAAdError.Offline]?"offline":t==e.EGAAdError.NoFill||t==e.EGAAdError[e.EGAAdError.NoFill]?"no_fill":t==e.EGAAdError.InternalError||t==e.EGAAdError[e.EGAAdError.InternalError]?"internal_error":t==e.EGAAdError.InvalidRequest||t==e.EGAAdError[e.EGAAdError.InvalidRequest]?"invalid_request":t==e.EGAAdError.UnableToPrecache||t==e.EGAAdError[e.EGAAdError.UnableToPrecache]?"unable_to_precache":""},l.adTypeToString=function(t){return t==e.EGAAdType.Video||t==e.EGAAdType[e.EGAAdType.Video]?"video":t==e.EGAAdType.RewardedVideo||t==e.EGAAdError[e.EGAAdType.RewardedVideo]?"rewarded_video":t==e.EGAAdType.Playable||t==e.EGAAdError[e.EGAAdType.Playable]?"playable":t==e.EGAAdType.Interstitial||t==e.EGAAdError[e.EGAAdType.Interstitial]?"interstitial":t==e.EGAAdType.OfferWall||t==e.EGAAdError[e.EGAAdType.OfferWall]?"offer_wall":t==e.EGAAdType.Banner||t==e.EGAAdError[e.EGAAdType.Banner]?"banner":""},l.CategorySessionStart="user",l.CategorySessionEnd="session_end",l.CategoryDesign="design",l.CategoryBusiness="business",l.CategoryProgression="progression",l.CategoryResource="resource",l.CategoryError="error",l.CategoryAds="ads",l.MaxEventCount=500,l.MAX_ERROR_COUNT=10,l.countMap={},l.timestampMap={},l}(),t.GAEvents=l}(o||(o={})),function(e){(function(t){var n=e.logging.GALogger,i=e.state.GAState,r=e.events.GAEvents,o=function(){function e(){this.blocks=new t.PriorityQueue({compare:function(e,t){return e-t}}),this.id2TimedBlockMap={},e.startThread()}return e.createTimedBlock=function(e){void 0===e&&(e=0);var n=new Date;return n.setSeconds(n.getSeconds()+e),new t.TimedBlock(n)},e.performTaskOnGAThread=function(n,i){void 0===i&&(i=0);var r=new Date;r.setSeconds(r.getSeconds()+i);var o=new t.TimedBlock(r);o.block=n,e.instance.id2TimedBlockMap[o.id]=o,e.instance.addTimedBlock(o)},e.performTimedBlockOnGAThread=function(t){e.instance.id2TimedBlockMap[t.id]=t,e.instance.addTimedBlock(t)},e.scheduleTimer=function(n,i){var r=new Date;r.setSeconds(r.getSeconds()+n);var o=new t.TimedBlock(r);return o.block=i,e.instance.id2TimedBlockMap[o.id]=o,e.instance.addTimedBlock(o),o.id},e.getTimedBlockById=function(t){return t in e.instance.id2TimedBlockMap?e.instance.id2TimedBlockMap[t]:null},e.ensureEventQueueIsRunning=function(){e.instance.keepRunning=!0,e.instance.isRunning||(e.instance.isRunning=!0,e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue))},e.endSessionAndStopQueue=function(){i.isInitialized()&&(n.i("Ending session."),e.stopEventQueue(),i.isEnabled()&&i.sessionIsStarted()&&(r.addSessionEndEvent(),i.instance.sessionStart=0))},e.stopEventQueue=function(){e.instance.keepRunning=!1},e.ignoreTimer=function(t){t in e.instance.id2TimedBlockMap&&(e.instance.id2TimedBlockMap[t].ignore=!0)},e.setEventProcessInterval=function(t){t>0&&(e.ProcessEventsIntervalInSeconds=t)},e.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},e.run=function(){clearTimeout(e.runTimeoutId);try{for(var t;t=e.getNextBlock();)if(!t.ignore)if(t.async){if(!t.running){t.running=!0,t.block();break}}else t.block();return void(e.runTimeoutId=setTimeout(e.run,e.ThreadWaitTimeInMs))}catch(i){n.e("Error on GA thread"),n.e(i.stack)}},e.startThread=function(){e.runTimeoutId=setTimeout(e.run,0)},e.getNextBlock=function(){var t=new Date;return e.instance.blocks.hasItems()&&e.instance.blocks.peek().deadline.getTime()<=t.getTime()?e.instance.blocks.peek().async&&e.instance.blocks.peek().running?e.instance.blocks.peek():e.instance.blocks.dequeue():null},e.processEventQueue=function(){r.processEvents("",!0),e.instance.keepRunning?e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue):e.instance.isRunning=!1},e.instance=new e,e.ThreadWaitTimeInMs=1e3,e.ProcessEventsIntervalInSeconds=8,e}();t.GAThreading=o})(e.threading||(e.threading={}))}(o||(o={})),function(t){var n=t.threading.GAThreading,i=t.logging.GALogger,r=t.store.GAStore,o=t.state.GAState,a=t.http.GAHTTPApi,s=t.device.GADevice,c=t.validators.GAValidator,u=t.http.EGAHTTPApiResponse,d=t.utilities.GAUtilities,l=t.events.GAEvents,f=function(){function f(){}return f.getGlobalObject=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0},f.init=function(){if(s.touch(),f.methodMap.configureAvailableCustomDimensions01=f.configureAvailableCustomDimensions01,f.methodMap.configureAvailableCustomDimensions02=f.configureAvailableCustomDimensions02,f.methodMap.configureAvailableCustomDimensions03=f.configureAvailableCustomDimensions03,f.methodMap.configureAvailableResourceCurrencies=f.configureAvailableResourceCurrencies,f.methodMap.configureAvailableResourceItemTypes=f.configureAvailableResourceItemTypes,f.methodMap.configureBuild=f.configureBuild,f.methodMap.configureSdkGameEngineVersion=f.configureSdkGameEngineVersion,f.methodMap.configureGameEngineVersion=f.configureGameEngineVersion,f.methodMap.configureUserId=f.configureUserId,f.methodMap.initialize=f.initialize,f.methodMap.addBusinessEvent=f.addBusinessEvent,f.methodMap.addResourceEvent=f.addResourceEvent,f.methodMap.addProgressionEvent=f.addProgressionEvent,f.methodMap.addDesignEvent=f.addDesignEvent,f.methodMap.addErrorEvent=f.addErrorEvent,f.methodMap.addAdEvent=f.addAdEvent,f.methodMap.setEnabledInfoLog=f.setEnabledInfoLog,f.methodMap.setEnabledVerboseLog=f.setEnabledVerboseLog,f.methodMap.setEnabledManualSessionHandling=f.setEnabledManualSessionHandling,f.methodMap.setEnabledEventSubmission=f.setEnabledEventSubmission,f.methodMap.setCustomDimension01=f.setCustomDimension01,f.methodMap.setCustomDimension02=f.setCustomDimension02,f.methodMap.setCustomDimension03=f.setCustomDimension03,f.methodMap.setGlobalCustomEventFields=f.setGlobalCustomEventFields,f.methodMap.setEventProcessInterval=f.setEventProcessInterval,f.methodMap.startSession=f.startSession,f.methodMap.endSession=f.endSession,f.methodMap.onStop=f.onStop,f.methodMap.onResume=f.onResume,f.methodMap.addRemoteConfigsListener=f.addRemoteConfigsListener,f.methodMap.removeRemoteConfigsListener=f.removeRemoteConfigsListener,f.methodMap.getRemoteConfigsValueAsString=f.getRemoteConfigsValueAsString,f.methodMap.isRemoteConfigsReady=f.isRemoteConfigsReady,f.methodMap.getRemoteConfigsContentAsString=f.getRemoteConfigsContentAsString,f.methodMap.addOnBeforeUnloadListener=f.addOnBeforeUnloadListener,f.methodMap.removeOnBeforeUnloadListener=f.removeOnBeforeUnloadListener,void 0!==f.getGlobalObject()&&void 0!==f.getGlobalObject().GameAnalytics&&void 0!==f.getGlobalObject().GameAnalytics.q){var e=f.getGlobalObject().GameAnalytics.q;for(var t in e)f.gaCommand.apply(null,e[t])}window.addEventListener("beforeunload",function(){console.log("addEventListener unload"),o.instance.isUnloading=!0,o.notifyBeforeUnloadListeners(),n.endSessionAndStopQueue(),o.instance.isUnloading=!1})},f.gaCommand=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length>0&&e[0]in t.GameAnalytics.methodMap&&(e.length>1?t.GameAnalytics.methodMap[e[0]].apply(null,Array.prototype.slice.call(e,1)):t.GameAnalytics.methodMap[e[0]]())},f.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):o.setAvailableCustomDimensions01(e)})},f.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):o.setAvailableCustomDimensions02(e)})},f.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):o.setAvailableCustomDimensions03(e)})},f.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Available resource currencies must be set before SDK is initialized"):o.setAvailableResourceCurrencies(e)})},f.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Available resource item types must be set before SDK is initialized"):o.setAvailableResourceItemTypes(e)})},f.configureBuild=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("Build version must be set before SDK is initialized."):c.validateBuild(e)?o.setBuild(e):i.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},f.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)||(c.validateSdkWrapperVersion(e)?s.sdkGameEngineVersion=e:i.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e))})},f.configureGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)||(c.validateEngineVersion(e)?s.gameEngineVersion=e:i.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e))})},f.configureUserId=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){f.isSdkReady(!0,!1)?i.w("A custom user id must be set before SDK is initialized."):c.validateUserId(e)?o.setUserId(e):i.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},f.initialize=function(e,t){void 0===e&&(e=""),void 0===t&&(t=""),s.updateConnectionType();var r=n.createTimedBlock();r.async=!0,f.initTimedBlockId=r.id,r.block=function(){f.isSdkReady(!0,!1)?i.w("SDK already initialized. Can only be called once."):c.validateKeys(e,t)?(o.setKeys(e,t),f.internalInitialize()):i.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+t)},n.performTimedBlockOnGAThread(r)},f.addBusinessEvent=function(e,t,i,r,a,c,u){if(void 0===e&&(e=""),void 0===t&&(t=0),void 0===i&&(i=""),void 0===r&&(r=""),void 0===a&&(a=""),void 0===c&&(c={}),void 0===u&&(u=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add business event"))return;l.addBusinessEvent(e,t,i,r,a,c,u)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add business event")&&l.addBusinessEvent(e,t,i,r,a,c,u)})},f.addResourceEvent=function(e,i,r,a,c,u,d){if(void 0===e&&(e=t.EGAResourceFlowType.Undefined),void 0===i&&(i=""),void 0===r&&(r=0),void 0===a&&(a=""),void 0===c&&(c=""),void 0===u&&(u={}),void 0===d&&(d=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add resource event"))return;l.addResourceEvent(e,i,r,a,c,u,d)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add resource event")&&l.addResourceEvent(e,i,r,a,c,u,d)})},f.addProgressionEvent=function(e,i,r,a,c,u,d){if(void 0===e&&(e=t.EGAProgressionStatus.Undefined),void 0===i&&(i=""),void 0===r&&(r=""),void 0===a&&(a=""),void 0===u&&(u={}),void 0===d&&(d=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add progression event"))return;var h="number"==typeof c;l.addProgressionEvent(e,i,r,a,h?c:0,h,u,d)}else n.performTaskOnGAThread(function(){if(f.isSdkReady(!0,!0,"Could not add progression event")){var t="number"==typeof c;l.addProgressionEvent(e,i,r,a,t?c:0,t,u,d)}})},f.addDesignEvent=function(e,t,i,r){if(void 0===i&&(i={}),void 0===r&&(r=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add design event"))return;var a="number"==typeof t;l.addDesignEvent(e,a?t:0,a,i,r)}else n.performTaskOnGAThread(function(){if(f.isSdkReady(!0,!0,"Could not add design event")){var n="number"==typeof t;l.addDesignEvent(e,n?t:0,n,i,r)}})},f.addErrorEvent=function(e,i,r,a){if(void 0===e&&(e=t.EGAErrorSeverity.Undefined),void 0===i&&(i=""),void 0===r&&(r={}),void 0===a&&(a=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add error event"))return;l.addErrorEvent(e,i,r,a)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add error event")&&l.addErrorEvent(e,i,r,a)})},f.addAdEventWithNoAdReason=function(e,i,r,a,c,u,d){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===i&&(i=t.EGAAdType.Undefined),void 0===r&&(r=""),void 0===a&&(a=""),void 0===c&&(c=t.EGAAdError.Undefined),void 0===u&&(u={}),void 0===d&&(d=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add ad event"))return;l.addAdEvent(e,i,r,a,c,0,!1,u,d)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add ad event")&&l.addAdEvent(e,i,r,a,c,0,!1,u,d)})},f.addAdEventWithDuration=function(e,i,r,a,c,u,d){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===i&&(i=t.EGAAdType.Undefined),void 0===r&&(r=""),void 0===a&&(a=""),void 0===c&&(c=0),void 0===u&&(u={}),void 0===d&&(d=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add ad event"))return;l.addAdEvent(e,i,r,a,t.EGAAdError.Undefined,c,!0,u,d)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add ad event")&&l.addAdEvent(e,i,r,a,t.EGAAdError.Undefined,c,!0,u,d)})},f.addAdEvent=function(e,i,r,a,c,u){if(void 0===e&&(e=t.EGAAdAction.Undefined),void 0===i&&(i=t.EGAAdType.Undefined),void 0===r&&(r=""),void 0===a&&(a=""),void 0===c&&(c={}),void 0===u&&(u=!1),s.updateConnectionType(),o.instance.isUnloading){if(!f.isSdkReady(!0,!0,"Could not add ad event"))return;l.addAdEvent(e,i,r,a,t.EGAAdError.Undefined,0,!1,c,u)}else n.performTaskOnGAThread(function(){f.isSdkReady(!0,!0,"Could not add ad event")&&l.addAdEvent(e,i,r,a,t.EGAAdError.Undefined,0,!1,c,u)})},f.setEnabledInfoLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(i.setInfoLog(e),i.i("Info logging enabled")):(i.i("Info logging disabled"),i.setInfoLog(e))})},f.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(i.setVerboseLog(e),i.i("Verbose logging enabled")):(i.i("Verbose logging disabled"),i.setVerboseLog(e))})},f.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){o.setManualSessionHandling(e)})},f.setEnabledEventSubmission=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(o.setEnabledEventSubmission(e),i.i("Event submission enabled")):(i.i("Event submission disabled"),o.setEnabledEventSubmission(e))})},f.setCustomDimension01=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension01(e,o.getAvailableCustomDimensions01())?o.setCustomDimension01(e):i.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},f.setCustomDimension02=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension02(e,o.getAvailableCustomDimensions02())?o.setCustomDimension02(e):i.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},f.setCustomDimension03=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){c.validateDimension03(e,o.getAvailableCustomDimensions03())?o.setCustomDimension03(e):i.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},f.setGlobalCustomEventFields=function(e){void 0===e&&(e={}),n.performTaskOnGAThread(function(){i.i("Set global custom event fields: "+JSON.stringify(e)),o.instance.currentGlobalCustomEventFields=e})},f.setEventProcessInterval=function(e){n.performTaskOnGAThread(function(){n.setEventProcessInterval(e)})},f.startSession=function(){if(o.isInitialized()){var e=n.createTimedBlock();e.async=!0,f.initTimedBlockId=e.id,e.block=function(){o.isEnabled()&&o.sessionIsStarted()&&n.endSessionAndStopQueue(),f.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)}},f.endSession=function(){f.onStop()},f.onStop=function(){n.performTaskOnGAThread(function(){try{n.endSessionAndStopQueue()}catch(e){}})},f.onResume=function(){var e=n.createTimedBlock();e.async=!0,f.initTimedBlockId=e.id,e.block=function(){f.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)},f.getRemoteConfigsValueAsString=function(e,t){return void 0===t&&(t=null),o.getConfigurationStringValue(e,t)},f.isRemoteConfigsReady=function(){return o.isRemoteConfigsReady()},f.addRemoteConfigsListener=function(e){o.addRemoteConfigsListener(e)},f.removeRemoteConfigsListener=function(e){o.removeRemoteConfigsListener(e)},f.getRemoteConfigsContentAsString=function(){return o.getRemoteConfigsContentAsString()},f.getABTestingId=function(){return o.getABTestingId()},f.getABTestingVariantId=function(){return o.getABTestingVariantId()},f.addOnBeforeUnloadListener=function(e){o.addOnBeforeUnloadListener(e)},f.removeOnBeforeUnloadListener=function(e){o.removeOnBeforeUnloadListener(e)},f.internalInitialize=function(){o.ensurePersistedStates(),r.setItem(o.getGameKey(),o.DefaultUserIdKey,o.getDefaultId()),o.setInitialized(!0),f.newSession(),o.isEnabled()&&n.ensureEventQueueIsRunning()},f.newSession=function(){i.i("Starting a new session."),o.validateAndFixCurrentDimensions(),a.instance.requestInit(o.instance.configsHash,f.startNewSessionCallback)},f.startNewSessionCallback=function(e,t){if(e!==u.Ok&&e!==u.Created||!t)e==u.Unauthorized?(i.w("Initialize SDK failed - Unauthorized"),o.instance.initAuthorized=!1):(e===u.NoResponse||e===u.RequestTimeout?i.i("Init call (session start) failed - no response. Could be offline or timeout."):e===u.BadResponse||e===u.JsonEncodeFailed||e===u.JsonDecodeFailed?i.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==u.BadRequest&&e!==u.UnknownResponseCode||i.i("Init call (session start) failed - bad request or unknown response."),null==o.instance.sdkConfig?null!=o.instance.sdkConfigCached?(i.i("Init call (session start) failed - using cached init values."),o.instance.sdkConfig=o.instance.sdkConfigCached):(i.i("Init call (session start) failed - using default init values."),o.instance.sdkConfig=o.instance.sdkConfigDefault):i.i("Init call (session start) failed - using cached init values."),o.instance.initAuthorized=!0);else{var a=0;if(t.server_ts){var s=t.server_ts;a=o.calculateServerTimeOffset(s)}if(t.time_offset=a,e!=u.Created){var c=o.getSdkConfig();c.configs&&(t.configs=c.configs),c.configs_hash&&(t.configs_hash=c.configs_hash),c.ab_id&&(t.ab_id=c.ab_id),c.ab_variant_id&&(t.ab_variant_id=c.ab_variant_id)}o.instance.configsHash=t.configs_hash?t.configs_hash:"",o.instance.abId=t.ab_id?t.ab_id:"",o.instance.abVariantId=t.ab_variant_id?t.ab_variant_id:"",r.setItem(o.getGameKey(),o.SdkConfigCachedKey,d.encode64(JSON.stringify(t))),o.instance.sdkConfigCached=t,o.instance.sdkConfig=t,o.instance.initAuthorized=!0}if(o.instance.clientServerTimeOffset=o.getSdkConfig().time_offset?o.getSdkConfig().time_offset:0,o.populateConfigurations(o.getSdkConfig()),!o.isEnabled())return i.w("Could not start session: SDK is disabled."),void n.stopEventQueue();n.ensureEventQueueIsRunning();var h=d.createGuid();o.instance.sessionId=h,o.instance.sessionStart=o.getClientTsAdjusted(),l.addSessionStartEvent();var p=n.getTimedBlockById(f.initTimedBlockId);null!=p&&(p.running=!1),f.initTimedBlockId=-1},f.resumeSessionAndStartQueue=function(){o.isInitialized()&&(i.i("Resuming session."),o.sessionIsStarted()||f.newSession())},f.isSdkReady=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=""),n&&(n+=": "),e&&!o.isInitialized()?(t&&i.w(n+"SDK is not initialized"),!1):e&&!o.isEnabled()?(t&&i.w(n+"SDK is disabled"),!1):!(e&&!o.sessionIsStarted()&&(t&&i.w(n+"Session has not started yet"),1))},f.initTimedBlockId=-1,f.methodMap={},f}();t.GameAnalytics=f}(o||(o={})),o.GameAnalytics.init(),o.GameAnalytics.gaCommand,t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){(function(e,i){"object"==typeof n&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):e.moment=i()})(this,function(){"use strict";var n,i;function r(){return n.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function u(e){return void 0===e}function d(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function h(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,i){return qt(e,t,n,i,!0).utc()}function g(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function v(e){if(null==e._isValid){var t=g(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function m(e){var t=p(NaN);return null!=e?h(g(t),e):g(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var y=r.momentProperties=[],_=!1;function S(e,t){var n,i,r;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=g(t)),u(t._locale)||(e._locale=t._locale),y.length>0)for(n=0;n<y.length;n++)u(r=t[i=y[n]])||(e[i]=r);return e}function E(e){S(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===_&&(_=!0,r.updateOffset(this),_=!1)}function b(e){return e instanceof E||null!=e&&null!=e._isAMomentObject}function A(e){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,t){var n=!0;return h(function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,o,a,c=[];for(o=0;o<arguments.length;o++){if(i="","object"==typeof arguments[o]){for(a in i+="\n["+o+"] ",arguments[0])s(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[o];c.push(i)}A(e+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)},t)}var w,k={};function T(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),k[e]||(A(t),k[e]=!0)}function M(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e,t){var n,i=h({},e);for(n in t)s(t,n)&&(a(e[n])&&a(t[n])?(i[n]={},h(i[n],e[n]),h(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)s(e,n)&&!s(t,n)&&a(e[n])&&(i[n]=h({},i[n]));return i}function I(e){null!=e&&this.set(e)}function O(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,w=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var G=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},L={};function N(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(L[e]=r),t&&(L[t[0]]=function(){return O(r.apply(this,arguments),t[1],t[2])}),n&&(L[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function F(e){var t,n,i,r=e.match(G);for(t=0,n=r.length;t<n;t++)L[r[t]]?r[t]=L[r[t]]:r[t]=(i=r[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,o="";for(i=0;i<n;i++)o+=M(r[i])?r[i].call(t,e):r[i];return o}}function U(e,t){return e.isValid()?(t=x(t,e.localeData()),R[t]=R[t]||F(t),R[t](e)):e.localeData().invalidDate()}function x(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;n>=0&&P.test(e);)e=e.replace(P,i),P.lastIndex=0,n-=1;return e}var B={};function j(e,t){var n=e.toLowerCase();B[n]=B[n+"s"]=B[t]=e}function V(e){return"string"==typeof e?B[e]||B[e.toLowerCase()]:void 0}function Y(e){var t,n,i={};for(n in e)s(e,n)&&(t=V(n))&&(i[t]=e[n]);return i}var H={};function W(e,t){H[e]=t}function K(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:H[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}function z(e){return e%4==0&&e%100!=0||e%400==0}function q(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function J(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=q(t)),n}function Z(e,t){return function(n){return null!=n?(X(this,e,n),r.updateOffset(this,t),this):Q(this,e)}}function Q(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function X(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&z(e.year())&&1===e.month()&&29===e.date()?(n=J(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Pe(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var $,ee=/\d/,te=/\d\d/,ne=/\d{3}/,ie=/\d{4}/,re=/[+-]?\d{6}/,oe=/\d\d?/,ae=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,ce=/\d{1,3}/,ue=/\d{1,4}/,de=/[+-]?\d{1,6}/,le=/\d+/,fe=/[+-]?\d+/,he=/Z|[+-]\d\d:?\d\d/gi,pe=/Z|[+-]\d\d(?::?\d\d)?/gi,ge=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function ve(e,t,n){$[e]=M(t)?t:function(e){return e&&n?n:t}}function me(e,t){return s($,e)?$[e](t._strict,t._locale):new RegExp(ye(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})))}function ye(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}$={};var _e={};function Se(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),d(t)&&(i=function(e,n){n[t]=J(e)}),n=0;n<e.length;n++)_e[e[n]]=i}function Ee(e,t){Se(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function be(e,t,n){null!=t&&s(_e,e)&&_e[e](t,n._a,n,e)}var Ae,Ce=0,we=1,ke=2,Te=3,Me=4,De=5,Ie=6,Oe=7,Ge=8;function Pe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=(t%12+12)%12;return e+=(t-n)/12,1===n?z(e)?29:28:31-n%7%2}Ae=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},N("M",["MM",2],"Mo",function(){return this.month()+1}),N("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),N("MMMM",0,0,function(e){return this.localeData().months(this,e)}),j("month","M"),W("month",8),ve("M",oe),ve("MM",oe,te),ve("MMM",function(e,t){return t.monthsShortRegex(e)}),ve("MMMM",function(e,t){return t.monthsRegex(e)}),Se(["M","MM"],function(e,t){t[we]=J(e)-1}),Se(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[we]=r:g(n).invalidMonth=e});var Re="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Le="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ne=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Fe=ge,Ue=ge;function xe(e,t,n){var i,r,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=Ae.call(this._shortMonthsParse,a))?r:null:-1!==(r=Ae.call(this._longMonthsParse,a))?r:null:"MMM"===t?-1!==(r=Ae.call(this._shortMonthsParse,a))?r:-1!==(r=Ae.call(this._longMonthsParse,a))?r:null:-1!==(r=Ae.call(this._longMonthsParse,a))?r:-1!==(r=Ae.call(this._shortMonthsParse,a))?r:null}function Be(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=J(t);else if(!d(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Pe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function je(e){return null!=e?(Be(this,e),r.updateOffset(this,!0),this):Q(this,"Month")}function Ve(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],o=[];for(t=0;t<12;t++)n=p([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),o.sort(e),t=0;t<12;t++)i[t]=ye(i[t]),r[t]=ye(r[t]);for(t=0;t<24;t++)o[t]=ye(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ye(e){return z(e)?366:365}N("Y",0,0,function(){var e=this.year();return e<=9999?O(e,4):"+"+e}),N(0,["YY",2],0,function(){return this.year()%100}),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),j("year","y"),W("year",1),ve("Y",fe),ve("YY",oe,te),ve("YYYY",ue,ie),ve("YYYYY",de,re),ve("YYYYYY",de,re),Se(["YYYYY","YYYYYY"],Ce),Se("YYYY",function(e,t){t[Ce]=2===e.length?r.parseTwoDigitYear(e):J(e)}),Se("YY",function(e,t){t[Ce]=r.parseTwoDigitYear(e)}),Se("Y",function(e,t){t[Ce]=parseInt(e,10)}),r.parseTwoDigitYear=function(e){return J(e)+(J(e)>68?1900:2e3)};var He=Z("FullYear",!0);function We(e,t,n,i,r,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,i,r,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,i,r,o,a),s}function Ke(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function ze(e,t,n){var i=7+t-n;return-(7+Ke(e,0,i).getUTCDay()-t)%7+i-1}function qe(e,t,n,i,r){var o,a,s=1+7*(t-1)+(7+n-i)%7+ze(e,i,r);return s<=0?a=Ye(o=e-1)+s:s>Ye(e)?(o=e+1,a=s-Ye(e)):(o=e,a=s),{year:o,dayOfYear:a}}function Je(e,t,n){var i,r,o=ze(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?i=a+Ze(r=e.year()-1,t,n):a>Ze(e.year(),t,n)?(i=a-Ze(e.year(),t,n),r=e.year()+1):(r=e.year(),i=a),{week:i,year:r}}function Ze(e,t,n){var i=ze(e,t,n),r=ze(e+1,t,n);return(Ye(e)-i+r)/7}function Qe(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Xe(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function $e(e,t){return e.slice(t,7).concat(e.slice(0,t))}N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),j("week","w"),j("isoWeek","W"),W("week",5),W("isoWeek",5),ve("w",oe),ve("ww",oe,te),ve("W",oe),ve("WW",oe,te),Ee(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=J(e)}),N("d",0,"do","day"),N("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),N("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),N("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),j("day","d"),j("weekday","e"),j("isoWeekday","E"),W("day",11),W("weekday",11),W("isoWeekday",11),ve("d",oe),ve("e",oe),ve("E",oe),ve("dd",function(e,t){return t.weekdaysMinRegex(e)}),ve("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ve("dddd",function(e,t){return t.weekdaysRegex(e)}),Ee(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:g(n).invalidWeekday=e}),Ee(["d","e","E"],function(e,t,n,i){t[i]=J(e)});var et="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),tt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),nt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),it=ge,rt=ge,ot=ge;function at(e,t,n){var i,r,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=Ae.call(this._weekdaysParse,a))?r:null:"ddd"===t?-1!==(r=Ae.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=Ae.call(this._minWeekdaysParse,a))?r:null:"dddd"===t?-1!==(r=Ae.call(this._weekdaysParse,a))?r:-1!==(r=Ae.call(this._shortWeekdaysParse,a))?r:-1!==(r=Ae.call(this._minWeekdaysParse,a))?r:null:"ddd"===t?-1!==(r=Ae.call(this._shortWeekdaysParse,a))?r:-1!==(r=Ae.call(this._weekdaysParse,a))?r:-1!==(r=Ae.call(this._minWeekdaysParse,a))?r:null:-1!==(r=Ae.call(this._minWeekdaysParse,a))?r:-1!==(r=Ae.call(this._weekdaysParse,a))?r:-1!==(r=Ae.call(this._shortWeekdaysParse,a))?r:null}function st(){function e(e,t){return t.length-e.length}var t,n,i,r,o,a=[],s=[],c=[],u=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),i=ye(this.weekdaysMin(n,"")),r=ye(this.weekdaysShort(n,"")),o=ye(this.weekdays(n,"")),a.push(i),s.push(r),c.push(o),u.push(i),u.push(r),u.push(o);a.sort(e),s.sort(e),c.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function ct(){return this.hours()%12||12}function ut(e,t){N(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function dt(e,t){return t._meridiemParse}N("H",["HH",2],0,"hour"),N("h",["hh",2],0,ct),N("k",["kk",2],0,function(){return this.hours()||24}),N("hmm",0,0,function(){return""+ct.apply(this)+O(this.minutes(),2)}),N("hmmss",0,0,function(){return""+ct.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)}),N("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)}),N("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)}),ut("a",!0),ut("A",!1),j("hour","h"),W("hour",13),ve("a",dt),ve("A",dt),ve("H",oe),ve("h",oe),ve("k",oe),ve("HH",oe,te),ve("hh",oe,te),ve("kk",oe,te),ve("hmm",ae),ve("hmmss",se),ve("Hmm",ae),ve("Hmmss",se),Se(["H","HH"],Te),Se(["k","kk"],function(e,t){var n=J(e);t[Te]=24===n?0:n}),Se(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),Se(["h","hh"],function(e,t,n){t[Te]=J(e),g(n).bigHour=!0}),Se("hmm",function(e,t,n){var i=e.length-2;t[Te]=J(e.substr(0,i)),t[Me]=J(e.substr(i)),g(n).bigHour=!0}),Se("hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[Te]=J(e.substr(0,i)),t[Me]=J(e.substr(i,2)),t[De]=J(e.substr(r)),g(n).bigHour=!0}),Se("Hmm",function(e,t){var n=e.length-2;t[Te]=J(e.substr(0,n)),t[Me]=J(e.substr(n))}),Se("Hmmss",function(e,t){var n=e.length-4,i=e.length-2;t[Te]=J(e.substr(0,n)),t[Me]=J(e.substr(n,2)),t[De]=J(e.substr(i))});var lt,ft=Z("Hours",!0),ht={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Re,monthsShort:Le,week:{dow:0,doy:6},weekdays:et,weekdaysMin:nt,weekdaysShort:tt,meridiemParse:/[ap]\.?m?\.?/i},pt={},gt={};function vt(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function mt(e){return e?e.toLowerCase().replace("_","-"):e}function yt(e){for(var t,n,i,r,o=0;o<e.length;){for(t=(r=mt(e[o]).split("-")).length,n=(n=mt(e[o+1]))?n.split("-"):null;t>0;){if(i=_t(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&vt(r,n)>=t-1)break;t--}o++}return lt}function _t(n){var i=null;if(void 0===pt[n]&&void 0!==t&&t&&t.exports)try{i=lt._abbr,e("./locale/"+n),St(i)}catch(r){pt[n]=null}return pt[n]}function St(e,t){var n;return e&&((n=u(t)?bt(e):Et(e,t))?lt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),lt._abbr}function Et(e,t){if(null!==t){var n,i=ht;if(t.abbr=e,null!=pt[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=pt[e]._config;else if(null!=t.parentLocale)if(null!=pt[t.parentLocale])i=pt[t.parentLocale]._config;else{if(null==(n=_t(t.parentLocale)))return gt[t.parentLocale]||(gt[t.parentLocale]=[]),gt[t.parentLocale].push({name:e,config:t}),null;i=n._config}return pt[e]=new I(D(i,t)),gt[e]&&gt[e].forEach(function(e){Et(e.name,e.config)}),St(e),pt[e]}return delete pt[e],null}function bt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return lt;if(!o(e)){if(t=_t(e))return t;e=[e]}return yt(e)}function At(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[we]<0||n[we]>11?we:n[ke]<1||n[ke]>Pe(n[Ce],n[we])?ke:n[Te]<0||n[Te]>24||24===n[Te]&&(0!==n[Me]||0!==n[De]||0!==n[Ie])?Te:n[Me]<0||n[Me]>59?Me:n[De]<0||n[De]>59?De:n[Ie]<0||n[Ie]>999?Ie:-1,g(e)._overflowDayOfYear&&(t<Ce||t>ke)&&(t=ke),g(e)._overflowWeeks&&-1===t&&(t=Oe),g(e)._overflowWeekday&&-1===t&&(t=Ge),g(e).overflow=t),e}var Ct=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kt=/Z|[+-]\d\d(?::?\d\d)?/,Tt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Mt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Dt=/^\/?Date\((-?\d+)/i,It=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ot={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Gt(e){var t,n,i,r,o,a,s=e._i,c=Ct.exec(s)||wt.exec(s);if(c){for(g(e).iso=!0,t=0,n=Tt.length;t<n;t++)if(Tt[t][1].exec(c[1])){r=Tt[t][0],i=!1!==Tt[t][2];break}if(null==r)return void(e._isValid=!1);if(c[3]){for(t=0,n=Mt.length;t<n;t++)if(Mt[t][1].exec(c[3])){o=(c[2]||" ")+Mt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!i&&null!=o)return void(e._isValid=!1);if(c[4]){if(!kt.exec(c[4]))return void(e._isValid=!1);a="Z"}e._f=r+(o||"")+(a||""),Vt(e)}else e._isValid=!1}function Pt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Rt(e,t,n){return!e||tt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(g(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Lt(e,t,n){if(e)return Ot[e];if(t)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}function Nt(e){var t,n,i,r,o,a,s,c,u=It.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(u){if(n=u[4],i=u[3],r=u[2],o=u[5],a=u[6],s=u[7],c=[Pt(n),Le.indexOf(i),parseInt(r,10),parseInt(o,10),parseInt(a,10)],s&&c.push(parseInt(s,10)),t=c,!Rt(u[1],t,e))return;e._a=t,e._tzm=Lt(u[8],u[9],u[10]),e._d=Ke.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function Ft(e){var t=Dt.exec(e._i);null===t?(Gt(e),!1===e._isValid&&(delete e._isValid,Nt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Ut(e,t,n){return null!=e?e:null!=t?t:n}function xt(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Bt(e){var t,n,i,r,o,a=[];if(!e._d){for(i=xt(e),e._w&&null==e._a[ke]&&null==e._a[we]&&jt(e),null!=e._dayOfYear&&(o=Ut(e._a[Ce],i[Ce]),(e._dayOfYear>Ye(o)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=Ke(o,0,e._dayOfYear),e._a[we]=n.getUTCMonth(),e._a[ke]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=i[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Te]&&0===e._a[Me]&&0===e._a[De]&&0===e._a[Ie]&&(e._nextDay=!0,e._a[Te]=0),e._d=(e._useUTC?Ke:We).apply(null,a),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Te]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(g(e).weekdayMismatch=!0)}}function jt(e){var t,n,i,r,o,a,s,c,u;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,a=4,n=Ut(t.GG,e._a[Ce],Je(Jt(),1,4).year),i=Ut(t.W,1),((r=Ut(t.E,1))<1||r>7)&&(c=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,u=Je(Jt(),o,a),n=Ut(t.gg,e._a[Ce],u.year),i=Ut(t.w,u.week),null!=t.d?((r=t.d)<0||r>6)&&(c=!0):null!=t.e?(r=t.e+o,(t.e<0||t.e>6)&&(c=!0)):r=o),i<1||i>Ze(n,o,a)?g(e)._overflowWeeks=!0:null!=c?g(e)._overflowWeekday=!0:(s=qe(n,i,r,o,a),e._a[Ce]=s.year,e._dayOfYear=s.dayOfYear)}function Vt(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],g(e).empty=!0;var t,n,i,o,a,s,c=""+e._i,u=c.length,d=0;for(i=x(e._f,e._locale).match(G)||[],t=0;t<i.length;t++)o=i[t],(n=(c.match(me(o,e))||[])[0])&&((a=c.substr(0,c.indexOf(n))).length>0&&g(e).unusedInput.push(a),c=c.slice(c.indexOf(n)+n.length),d+=n.length),L[o]?(n?g(e).empty=!1:g(e).unusedTokens.push(o),be(o,n,e)):e._strict&&!n&&g(e).unusedTokens.push(o);g(e).charsLeftOver=u-d,c.length>0&&g(e).unusedInput.push(c),e._a[Te]<=12&&!0===g(e).bigHour&&e._a[Te]>0&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[Te]=Yt(e._locale,e._a[Te],e._meridiem),null!==(s=g(e).era)&&(e._a[Ce]=e._locale.erasConvertYear(s,e._a[Ce])),Bt(e),At(e)}else Nt(e);else Gt(e)}function Yt(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function Ht(e){var t,n,i,r,o,a,s=!1;if(0===e._f.length)return g(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)o=0,a=!1,t=S({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],Vt(t),v(t)&&(a=!0),o+=g(t).charsLeftOver,o+=10*g(t).unusedTokens.length,g(t).score=o,s?o<i&&(i=o,n=t):(null==i||o<i||a)&&(i=o,n=t,a&&(s=!0));h(e,n||t)}function Wt(e){if(!e._d){var t=Y(e._i),n=void 0===t.day?t.date:t.day;e._a=f([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Bt(e)}}function Kt(e){var t=e._i,n=e._f;return e._locale=e._locale||bt(e._l),null===t||void 0===n&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),b(t)?new E(At(t)):(l(t)?e._d=t:o(n)?Ht(e):n?Vt(e):zt(e),v(e)||(e._d=null),e))}function zt(e){var t=e._i;u(t)?e._d=new Date(r.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?Ft(e):o(t)?(e._a=f(t.slice(0),function(e){return parseInt(e,10)}),Bt(e)):a(t)?Wt(e):d(t)?e._d=new Date(t):r.createFromInputFallback(e)}function qt(e,t,n,i,r){var s,u={};return!0!==t&&!1!==t||(i=t,t=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(a(e)&&c(e)||o(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=r,u._l=n,u._i=e,u._f=t,u._strict=i,(s=new E(At(Kt(u))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Jt(e,t,n,i){return qt(e,t,n,i,!1)}r.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),r.ISO_8601=function(){},r.RFC_2822=function(){};var Zt=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Jt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()}),Qt=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Jt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()});function Xt(e,t){var n,i;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Jt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var $t=["year","quarter","month","week","day","hour","minute","second","millisecond"];function en(e){var t,n,i=!1;for(t in e)if(s(e,t)&&(-1===Ae.call($t,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<$t.length;++n)if(e[$t[n]]){if(i)return!1;parseFloat(e[$t[n]])!==J(e[$t[n]])&&(i=!0)}return!0}function tn(e){var t=Y(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,c=t.minute||0,u=t.second||0,d=t.millisecond||0;this._isValid=en(t),this._milliseconds=+d+1e3*u+6e4*c+36e5*s,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=bt(),this._bubble()}function nn(e){return e instanceof tn}function rn(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function on(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&J(e[i])!==J(t[i]))&&a++;return a+o}function an(e,t){N(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+O(~~(e/60),2)+t+O(~~e%60,2)})}an("Z",":"),an("ZZ",""),ve("Z",pe),ve("ZZ",pe),Se(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=cn(pe,e)});var sn=/([\+\-]|\d\d)/gi;function cn(e,t){var n,i,r=(t||"").match(e);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(sn)||["-",0,0])[1]+J(n[2]))?0:"+"===n[0]?i:-i}function un(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(b(e)||l(e)?e.valueOf():Jt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Jt(e).local()}function dn(e){return-Math.round(e._d.getTimezoneOffset())}function ln(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var fn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,hn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function pn(e,t){var n,i,r,o,a,c,u=e,l=null;return nn(e)?u={ms:e._milliseconds,d:e._days,M:e._months}:d(e)||!isNaN(+e)?(u={},t?u[t]=+e:u.milliseconds=+e):(l=fn.exec(e))?(n="-"===l[1]?-1:1,u={y:0,d:J(l[ke])*n,h:J(l[Te])*n,m:J(l[Me])*n,s:J(l[De])*n,ms:J(rn(1e3*l[Ie]))*n}):(l=hn.exec(e))?(n="-"===l[1]?-1:1,u={y:gn(l[2],n),M:gn(l[3],n),w:gn(l[4],n),d:gn(l[5],n),h:gn(l[6],n),m:gn(l[7],n),s:gn(l[8],n)}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(o=Jt(u.from),a=Jt(u.to),r=o.isValid()&&a.isValid()?(a=un(a,o),o.isBefore(a)?c=vn(o,a):((c=vn(a,o)).milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0},(u={}).ms=r.milliseconds,u.M=r.months),i=new tn(u),nn(e)&&s(e,"_locale")&&(i._locale=e._locale),nn(e)&&s(e,"_isValid")&&(i._isValid=e._isValid),i}function gn(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function vn(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function mn(e,t){return function(n,i){var r;return null===i||isNaN(+i)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),yn(this,pn(n,i),e),this}}function yn(e,t,n,i){var o=t._milliseconds,a=rn(t._days),s=rn(t._months);e.isValid()&&(i=null==i||i,s&&Be(e,Q(e,"Month")+s*n),a&&X(e,"Date",Q(e,"Date")+a*n),o&&e._d.setTime(e._d.valueOf()+o*n),i&&r.updateOffset(e,a||s))}pn.fn=tn.prototype,pn.invalid=function(){return pn(NaN)};var _n=mn(1,"add"),Sn=mn(-1,"subtract");function En(e){return"string"==typeof e||e instanceof String}function bn(e){var t,n=a(e)&&!c(e),i=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<r.length;t+=1)i=i||s(e,r[t]);return n&&i}function An(e){var t=o(e),n=!1;return t&&(n=0===e.filter(function(t){return!d(t)&&En(e)}).length),t&&n}function Cn(e){var t,n=a(e)&&!c(e),i=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<r.length;t+=1)i=i||s(e,r[t]);return n&&i}function wn(e,t){if(e.date()<t.date())return-wn(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function kn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=bt(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Tn=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Mn(){return this._locale}var Dn=126227808e5;function In(e,t){return(e%t+t)%t}function On(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-Dn:new Date(e,t,n).valueOf()}function Gn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-Dn:Date.UTC(e,t,n)}function Pn(e,t){return t.erasAbbrRegex(e)}function Rn(){var e,t,n=[],i=[],r=[],o=[],a=this.eras();for(e=0,t=a.length;e<t;++e)i.push(ye(a[e].name)),n.push(ye(a[e].abbr)),r.push(ye(a[e].narrow)),o.push(ye(a[e].name)),o.push(ye(a[e].abbr)),o.push(ye(a[e].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function Ln(e,t){N(0,[e,e.length],0,t)}function Nn(e,t,n,i,r){var o;return null==e?Je(this,i,r).year:(t>(o=Ze(e,i,r))&&(t=o),Fn.call(this,e,t,n,i,r))}function Fn(e,t,n,i,r){var o=qe(e,t,n,i,r),a=Ke(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}N("N",0,0,"eraAbbr"),N("NN",0,0,"eraAbbr"),N("NNN",0,0,"eraAbbr"),N("NNNN",0,0,"eraName"),N("NNNNN",0,0,"eraNarrow"),N("y",["y",1],"yo","eraYear"),N("y",["yy",2],0,"eraYear"),N("y",["yyy",3],0,"eraYear"),N("y",["yyyy",4],0,"eraYear"),ve("N",Pn),ve("NN",Pn),ve("NNN",Pn),ve("NNNN",function(e,t){return t.erasNameRegex(e)}),ve("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),Se(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,i){var r=n._locale.erasParse(e,i,n._strict);r?g(n).era=r:g(n).invalidEra=e}),ve("y",le),ve("yy",le),ve("yyy",le),ve("yyyy",le),ve("yo",function(e,t){return t._eraYearOrdinalRegex||le}),Se(["y","yy","yyy","yyyy"],Ce),Se(["yo"],function(e,t,n){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Ce]=n._locale.eraYearOrdinalParse(e,i):t[Ce]=parseInt(e,10)}),N(0,["gg",2],0,function(){return this.weekYear()%100}),N(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ln("gggg","weekYear"),Ln("ggggg","weekYear"),Ln("GGGG","isoWeekYear"),Ln("GGGGG","isoWeekYear"),j("weekYear","gg"),j("isoWeekYear","GG"),W("weekYear",1),W("isoWeekYear",1),ve("G",fe),ve("g",fe),ve("GG",oe,te),ve("gg",oe,te),ve("GGGG",ue,ie),ve("gggg",ue,ie),ve("GGGGG",de,re),ve("ggggg",de,re),Ee(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=J(e)}),Ee(["gg","GG"],function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)}),N("Q",0,"Qo","quarter"),j("quarter","Q"),W("quarter",7),ve("Q",ee),Se("Q",function(e,t){t[we]=3*(J(e)-1)}),N("D",["DD",2],"Do","date"),j("date","D"),W("date",9),ve("D",oe),ve("DD",oe,te),ve("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),Se(["D","DD"],ke),Se("Do",function(e,t){t[ke]=J(e.match(oe)[0])});var Un=Z("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear"),j("dayOfYear","DDD"),W("dayOfYear",4),ve("DDD",ce),ve("DDDD",ne),Se(["DDD","DDDD"],function(e,t,n){n._dayOfYear=J(e)}),N("m",["mm",2],0,"minute"),j("minute","m"),W("minute",14),ve("m",oe),ve("mm",oe,te),Se(["m","mm"],Me);var xn=Z("Minutes",!1);N("s",["ss",2],0,"second"),j("second","s"),W("second",15),ve("s",oe),ve("ss",oe,te),Se(["s","ss"],De);var Bn,jn,Vn=Z("Seconds",!1);for(N("S",0,0,function(){return~~(this.millisecond()/100)}),N(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,function(){return 10*this.millisecond()}),N(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),N(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),N(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),N(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),N(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),j("millisecond","ms"),W("millisecond",16),ve("S",ce,ee),ve("SS",ce,te),ve("SSS",ce,ne),Bn="SSSS";Bn.length<=9;Bn+="S")ve(Bn,le);function Yn(e,t){t[Ie]=J(1e3*("0."+e))}for(Bn="S";Bn.length<=9;Bn+="S")Se(Bn,Yn);jn=Z("Milliseconds",!1),N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var Hn=E.prototype;function Wn(e){return e}Hn.add=_n,Hn.calendar=function(e,t){var n;1===arguments.length&&(arguments[0]?b(n=arguments[0])||l(n)||En(n)||d(n)||An(n)||bn(n)||null==n?(e=arguments[0],t=void 0):Cn(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||Jt(),o=un(i,this).startOf("day"),a=r.calendarFormat(this,o)||"sameElse",s=t&&(M(t[a])?t[a].call(this,i):t[a]);return this.format(s||this.localeData().calendar(a,this,Jt(i)))},Hn.clone=function(){return new E(this)},Hn.diff=function(e,t,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=un(e,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),t=V(t)){case"year":o=wn(this,i)/12;break;case"month":o=wn(this,i);break;case"quarter":o=wn(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:q(o)},Hn.endOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?Gn:On,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-In(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-In(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-In(t,1e3)-1}return this._d.setTime(t),r.updateOffset(this,!0),this},Hn.format=function(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=U(this,e);return this.localeData().postformat(t)},Hn.from=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||Jt(e).isValid())?pn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Hn.fromNow=function(e){return this.from(Jt(),e)},Hn.to=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||Jt(e).isValid())?pn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Hn.toNow=function(e){return this.to(Jt(),e)},Hn.get=function(e){return M(this[e=V(e)])?this[e]():this},Hn.invalidAt=function(){return g(this).overflow},Hn.isAfter=function(e,t){var n=b(e)?e:Jt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Hn.isBefore=function(e,t){var n=b(e)?e:Jt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Hn.isBetween=function(e,t,n,i){var r=b(e)?e:Jt(e),o=b(t)?t:Jt(t);return!!(this.isValid()&&r.isValid()&&o.isValid())&&("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n))},Hn.isSame=function(e,t){var n,i=b(e)?e:Jt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Hn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Hn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Hn.isValid=function(){return v(this)},Hn.lang=Tn,Hn.locale=kn,Hn.localeData=Mn,Hn.max=Qt,Hn.min=Zt,Hn.parsingFlags=function(){return h({},g(this))},Hn.set=function(e,t){if("object"==typeof e){var n,i=K(e=Y(e));for(n=0;n<i.length;n++)this[i[n].unit](e[i[n].unit])}else if(M(this[e=V(e)]))return this[e](t);return this},Hn.startOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?Gn:On,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=In(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=In(t,6e4);break;case"second":t=this._d.valueOf(),t-=In(t,1e3)}return this._d.setTime(t),r.updateOffset(this,!0),this},Hn.subtract=Sn,Hn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Hn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Hn.toDate=function(){return new Date(this.valueOf())},Hn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?U(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+6e4*this.utcOffset()).toISOString().replace("Z",U(n,"Z")):U(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Hn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i="moment",r="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Hn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Hn.toJSON=function(){return this.isValid()?this.toISOString():null},Hn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Hn.unix=function(){return Math.floor(this.valueOf()/1e3)},Hn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Hn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Hn.eraName=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""},Hn.eraNarrow=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""},Hn.eraAbbr=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""},Hn.eraYear=function(){var e,t,n,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return(this.year()-r(o[e].since).year())*n+o[e].offset;return this.year()},Hn.year=He,Hn.isLeapYear=function(){return z(this.year())},Hn.weekYear=function(e){return Nn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Hn.isoWeekYear=function(e){return Nn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Hn.quarter=Hn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Hn.month=je,Hn.daysInMonth=function(){return Pe(this.year(),this.month())},Hn.week=Hn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Hn.isoWeek=Hn.isoWeeks=function(e){var t=Je(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Hn.weeksInYear=function(){var e=this.localeData()._week;return Ze(this.year(),e.dow,e.doy)},Hn.weeksInWeekYear=function(){var e=this.localeData()._week;return Ze(this.weekYear(),e.dow,e.doy)},Hn.isoWeeksInYear=function(){return Ze(this.year(),1,4)},Hn.isoWeeksInISOWeekYear=function(){return Ze(this.isoWeekYear(),1,4)},Hn.date=Un,Hn.day=Hn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Qe(e,this.localeData()),this.add(e-t,"d")):t},Hn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Hn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Xe(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Hn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Hn.hour=Hn.hours=ft,Hn.minute=Hn.minutes=xn,Hn.second=Hn.seconds=Vn,Hn.millisecond=Hn.milliseconds=jn,Hn.utcOffset=function(e,t,n){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=cn(pe,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=dn(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?yn(this,pn(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:dn(this)},Hn.utc=function(e){return this.utcOffset(0,e)},Hn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(dn(this),"m")),this},Hn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=cn(he,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Hn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Jt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Hn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Hn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Hn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Hn.isUtc=ln,Hn.isUTC=ln,Hn.zoneAbbr=function(){return this._isUTC?"UTC":""},Hn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Hn.dates=C("dates accessor is deprecated. Use date instead.",Un),Hn.months=C("months accessor is deprecated. Use month instead",je),Hn.years=C("years accessor is deprecated. Use year instead",He),Hn.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),Hn.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e,t={};return S(t,this),(t=Kt(t))._a?(e=t._isUTC?p(t._a):Jt(t._a),this._isDSTShifted=this.isValid()&&on(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var Kn=I.prototype;function zn(e,t,n,i){var r=bt(),o=p().set(i,t);return r[n](o,e)}function qn(e,t,n){if(d(e)&&(t=e,e=void 0),e=e||"",null!=t)return zn(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=zn(e,i,n,"month");return r}function Jn(e,t,n,i){"boolean"==typeof e?(d(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,d(t)&&(n=t,t=void 0),t=t||"");var r,o=bt(),a=e?o._week.dow:0,s=[];if(null!=n)return zn(t,(n+a)%7,i,"day");for(r=0;r<7;r++)s[r]=zn(t,(r+a)%7,i,"day");return s}Kn.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return M(i)?i.call(t,n):i},Kn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(G).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},Kn.invalidDate=function(){return this._invalidDate},Kn.ordinal=function(e){return this._ordinal.replace("%d",e)},Kn.preparse=Wn,Kn.postformat=Wn,Kn.relativeTime=function(e,t,n,i){var r=this._relativeTime[n];return M(r)?r(e,t,n,i):r.replace(/%d/i,e)},Kn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return M(n)?n(t):n.replace(/%s/i,t)},Kn.set=function(e){var t,n;for(n in e)s(e,n)&&(M(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Kn.eras=function(){var e,t,n,i=this._eras||bt("en")._eras;for(e=0,t=i.length;e<t;++e){switch(typeof i[e].since){case"string":n=r(i[e].since).startOf("day"),i[e].since=n.valueOf()}switch(typeof i[e].until){case"undefined":i[e].until=1/0;break;case"string":n=r(i[e].until).startOf("day").valueOf(),i[e].until=n.valueOf()}}return i},Kn.erasParse=function(e,t,n){var i,r,o,a,s,c=this.eras();for(e=e.toUpperCase(),i=0,r=c.length;i<r;++i)if(o=c[i].name.toUpperCase(),a=c[i].abbr.toUpperCase(),s=c[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return c[i];break;case"NNNN":if(o===e)return c[i];break;case"NNNNN":if(s===e)return c[i]}else if([o,a,s].indexOf(e)>=0)return c[i]},Kn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n},Kn.erasAbbrRegex=function(e){return s(this,"_erasAbbrRegex")||Rn.call(this),e?this._erasAbbrRegex:this._erasRegex},Kn.erasNameRegex=function(e){return s(this,"_erasNameRegex")||Rn.call(this),e?this._erasNameRegex:this._erasRegex},Kn.erasNarrowRegex=function(e){return s(this,"_erasNarrowRegex")||Rn.call(this),e?this._erasNarrowRegex:this._erasRegex},Kn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ne).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},Kn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ne.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Kn.monthsParse=function(e,t,n){var i,r,o;if(this._monthsParseExact)return xe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},Kn.monthsRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||Ve.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=Ue),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Kn.monthsShortRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||Ve.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Fe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Kn.week=function(e){return Je(e,this._week.dow,this._week.doy).week},Kn.firstDayOfYear=function(){return this._week.doy},Kn.firstDayOfWeek=function(){return this._week.dow},Kn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?$e(n,this._week.dow):e?n[e.day()]:n},Kn.weekdaysMin=function(e){return!0===e?$e(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Kn.weekdaysShort=function(e){return!0===e?$e(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Kn.weekdaysParse=function(e,t,n){var i,r,o;if(this._weekdaysParseExact)return at.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},Kn.weekdaysRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||st.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=it),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Kn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||st.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=rt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Kn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||st.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ot),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Kn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Kn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},St("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===J(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=C("moment.lang is deprecated. Use moment.locale instead.",St),r.langData=C("moment.langData is deprecated. Use moment.localeData instead.",bt);var Zn=Math.abs;function Qn(e,t,n,i){var r=pn(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function Xn(e){return e<0?Math.floor(e):Math.ceil(e)}function $n(e){return 4800*e/146097}function ei(e){return 146097*e/4800}function ti(e){return function(){return this.as(e)}}var ni=ti("ms"),ii=ti("s"),ri=ti("m"),oi=ti("h"),ai=ti("d"),si=ti("w"),ci=ti("M"),ui=ti("Q"),di=ti("y");function li(e){return function(){return this.isValid()?this._data[e]:NaN}}var fi=li("milliseconds"),hi=li("seconds"),pi=li("minutes"),gi=li("hours"),vi=li("days"),mi=li("months"),yi=li("years"),_i=Math.round,Si={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Ei(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function bi(e,t,n,i){var r=pn(e).abs(),o=_i(r.as("s")),a=_i(r.as("m")),s=_i(r.as("h")),c=_i(r.as("d")),u=_i(r.as("M")),d=_i(r.as("w")),l=_i(r.as("y")),f=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(f=f||d<=1&&["w"]||d<n.w&&["ww",d]),(f=f||u<=1&&["M"]||u<n.M&&["MM",u]||l<=1&&["y"]||["yy",l])[2]=t,f[3]=+e>0,f[4]=i,Ei.apply(null,f)}var Ai=Math.abs;function Ci(e){return(e>0)-(e<0)||+e}function wi(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,r,o,a,s,c=Ai(this._milliseconds)/1e3,u=Ai(this._days),d=Ai(this._months),l=this.asSeconds();return l?(e=q(c/60),t=q(e/60),c%=60,e%=60,n=q(d/12),d%=12,i=c?c.toFixed(3).replace(/\.?0+$/,""):"",r=l<0?"-":"",o=Ci(this._months)!==Ci(l)?"-":"",a=Ci(this._days)!==Ci(l)?"-":"",s=Ci(this._milliseconds)!==Ci(l)?"-":"",r+"P"+(n?o+n+"Y":"")+(d?o+d+"M":"")+(u?a+u+"D":"")+(t||e||c?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(c?s+i+"S":"")):"P0D"}var ki=tn.prototype;return ki.isValid=function(){return this._isValid},ki.abs=function(){var e=this._data;return this._milliseconds=Zn(this._milliseconds),this._days=Zn(this._days),this._months=Zn(this._months),e.milliseconds=Zn(e.milliseconds),e.seconds=Zn(e.seconds),e.minutes=Zn(e.minutes),e.hours=Zn(e.hours),e.months=Zn(e.months),e.years=Zn(e.years),this},ki.add=function(e,t){return Qn(this,e,t,1)},ki.subtract=function(e,t){return Qn(this,e,t,-1)},ki.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=V(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+$n(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(ei(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},ki.asMilliseconds=ni,ki.asSeconds=ii,ki.asMinutes=ri,ki.asHours=oi,ki.asDays=ai,ki.asWeeks=si,ki.asMonths=ci,ki.asQuarters=ui,ki.asYears=di,ki.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*J(this._months/12):NaN},ki._bubble=function(){var e,t,n,i,r,o=this._milliseconds,a=this._days,s=this._months,c=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Xn(ei(s)+a),a=0,s=0),c.milliseconds=o%1e3,e=q(o/1e3),c.seconds=e%60,t=q(e/60),c.minutes=t%60,n=q(t/60),c.hours=n%24,a+=q(n/24),s+=r=q($n(a)),a-=Xn(ei(r)),i=q(s/12),s%=12,c.days=a,c.months=s,c.years=i,this},ki.clone=function(){return pn(this)},ki.get=function(e){return e=V(e),this.isValid()?this[e+"s"]():NaN},ki.milliseconds=fi,ki.seconds=hi,ki.minutes=pi,ki.hours=gi,ki.days=vi,ki.weeks=function(){return q(this.days()/7)},ki.months=mi,ki.years=yi,ki.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,o=Si;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(o=Object.assign({},Si,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),i=bi(this,!r,o,n=this.localeData()),r&&(i=n.pastFuture(+this,i)),n.postformat(i)},ki.toISOString=wi,ki.toString=wi,ki.toJSON=wi,ki.locale=kn,ki.localeData=Mn,ki.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",wi),ki.lang=Tn,N("X",0,0,"unix"),N("x",0,0,"valueOf"),ve("x",fe),ve("X",/[+-]?\d+(\.\d{1,3})?/),Se("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),Se("x",function(e,t,n){n._d=new Date(J(e))}),r.version="2.29.1",n=Jt,r.fn=Hn,r.min=function(){return Xt("isBefore",[].slice.call(arguments,0))},r.max=function(){return Xt("isAfter",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=p,r.unix=function(e){return Jt(1e3*e)},r.months=function(e,t){return qn(e,t,"months")},r.isDate=l,r.locale=St,r.invalid=m,r.duration=pn,r.isMoment=b,r.weekdays=function(e,t,n){return Jn(e,t,n,"weekdays")},r.parseZone=function(){return Jt.apply(null,arguments).parseZone()},r.localeData=bt,r.isDuration=nn,r.monthsShort=function(e,t){return qn(e,t,"monthsShort")},r.weekdaysMin=function(e,t,n){return Jn(e,t,n,"weekdaysMin")},r.defineLocale=Et,r.updateLocale=function(e,t){if(null!=t){var n,i,r=ht;null!=pt[e]&&null!=pt[e].parentLocale?pt[e].set(D(pt[e]._config,t)):(null!=(i=_t(e))&&(r=i._config),t=D(r,t),null==i&&(t.abbr=e),(n=new I(t)).parentLocale=pt[e],pt[e]=n),St(e)}else null!=pt[e]&&(null!=pt[e].parentLocale?(pt[e]=pt[e].parentLocale,e===St()&&St(e)):null!=pt[e]&&delete pt[e]);return pt[e]},r.locales=function(){return w(pt)},r.weekdaysShort=function(e,t,n){return Jn(e,t,n,"weekdaysShort")},r.normalizeUnits=V,r.relativeTimeRounding=function(e){return void 0===e?_i:"function"==typeof e&&(_i=e,!0)},r.relativeTimeThreshold=function(e,t){return void 0!==Si[e]&&(void 0===t?Si[e]:(Si[e]=t,"s"===e&&(Si.ss=t-1),!0))},r.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=Hn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r})},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return l.default}});var i=f(e("./v1.js")),r=f(e("./v3.js")),o=f(e("./v4.js")),a=f(e("./v5.js")),s=f(e("./nil.js")),c=f(e("./version.js")),u=f(e("./validate.js")),d=f(e("./stringify.js")),l=f(e("./parse.js"));function f(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":5,"./parse.js":6,"./stringify.js":10,"./v1.js":11,"./v3.js":12,"./v4.js":14,"./v5.js":15,"./validate.js":16,"./version.js":17}],4:[function(e,t,n){"use strict";function i(e){const t=[],n=32*e.length;for(let i=0;i<n;i+=8){const n=e[i>>5]>>>i%32&255,r=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16);t.push(r)}return t}function r(e){return 15+(e+64>>>9<<4)}function o(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let n=1732584193,i=-271733879,o=-1732584194,a=271733878;for(let r=0;r<e.length;r+=16){const t=n,c=i,h=o,p=a;n=u(n,i,o,a,e[r],7,-680876936),a=u(a,n,i,o,e[r+1],12,-389564586),o=u(o,a,n,i,e[r+2],17,606105819),i=u(i,o,a,n,e[r+3],22,-1044525330),n=u(n,i,o,a,e[r+4],7,-176418897),a=u(a,n,i,o,e[r+5],12,1200080426),o=u(o,a,n,i,e[r+6],17,-1473231341),i=u(i,o,a,n,e[r+7],22,-45705983),n=u(n,i,o,a,e[r+8],7,1770035416),a=u(a,n,i,o,e[r+9],12,-1958414417),o=u(o,a,n,i,e[r+10],17,-42063),i=u(i,o,a,n,e[r+11],22,-1990404162),n=u(n,i,o,a,e[r+12],7,1804603682),a=u(a,n,i,o,e[r+13],12,-40341101),o=u(o,a,n,i,e[r+14],17,-1502002290),n=d(n,i=u(i,o,a,n,e[r+15],22,1236535329),o,a,e[r+1],5,-165796510),a=d(a,n,i,o,e[r+6],9,-1069501632),o=d(o,a,n,i,e[r+11],14,643717713),i=d(i,o,a,n,e[r],20,-373897302),n=d(n,i,o,a,e[r+5],5,-701558691),a=d(a,n,i,o,e[r+10],9,38016083),o=d(o,a,n,i,e[r+15],14,-660478335),i=d(i,o,a,n,e[r+4],20,-405537848),n=d(n,i,o,a,e[r+9],5,568446438),a=d(a,n,i,o,e[r+14],9,-1019803690),o=d(o,a,n,i,e[r+3],14,-187363961),i=d(i,o,a,n,e[r+8],20,1163531501),n=d(n,i,o,a,e[r+13],5,-1444681467),a=d(a,n,i,o,e[r+2],9,-51403784),o=d(o,a,n,i,e[r+7],14,1735328473),n=l(n,i=d(i,o,a,n,e[r+12],20,-1926607734),o,a,e[r+5],4,-378558),a=l(a,n,i,o,e[r+8],11,-2022574463),o=l(o,a,n,i,e[r+11],16,1839030562),i=l(i,o,a,n,e[r+14],23,-35309556),n=l(n,i,o,a,e[r+1],4,-1530992060),a=l(a,n,i,o,e[r+4],11,1272893353),o=l(o,a,n,i,e[r+7],16,-155497632),i=l(i,o,a,n,e[r+10],23,-1094730640),n=l(n,i,o,a,e[r+13],4,681279174),a=l(a,n,i,o,e[r],11,-358537222),o=l(o,a,n,i,e[r+3],16,-722521979),i=l(i,o,a,n,e[r+6],23,76029189),n=l(n,i,o,a,e[r+9],4,-640364487),a=l(a,n,i,o,e[r+12],11,-421815835),o=l(o,a,n,i,e[r+15],16,530742520),n=f(n,i=l(i,o,a,n,e[r+2],23,-995338651),o,a,e[r],6,-198630844),a=f(a,n,i,o,e[r+7],10,1126891415),o=f(o,a,n,i,e[r+14],15,-1416354905),i=f(i,o,a,n,e[r+5],21,-57434055),n=f(n,i,o,a,e[r+12],6,1700485571),a=f(a,n,i,o,e[r+3],10,-1894986606),o=f(o,a,n,i,e[r+10],15,-1051523),i=f(i,o,a,n,e[r+1],21,-2054922799),n=f(n,i,o,a,e[r+8],6,1873313359),a=f(a,n,i,o,e[r+15],10,-30611744),o=f(o,a,n,i,e[r+6],15,-1560198380),i=f(i,o,a,n,e[r+13],21,1309151649),n=f(n,i,o,a,e[r+4],6,-145523070),a=f(a,n,i,o,e[r+11],10,-1120210379),o=f(o,a,n,i,e[r+2],15,718787259),i=f(i,o,a,n,e[r+9],21,-343485551),n=s(n,t),i=s(i,c),o=s(o,h),a=s(a,p)}return[n,i,o,a]}function a(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(r(t));for(let i=0;i<t;i+=8)n[i>>5]|=(255&e[i/8])<<i%32;return n}function s(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function c(e,t,n,i,r,o){return s((a=s(s(t,e),s(i,o)))<<(c=r)|a>>>32-c,n);var a,c}function u(e,t,n,i,r,o,a){return c(t&n|~t&i,e,t,r,o,a)}function d(e,t,n,i,r,o,a){return c(t&i|n&~i,e,t,r,o,a)}function l(e,t,n,i,r,o,a){return c(t^n^i,e,t,r,o,a)}function f(e,t,n,i,r,o,a){return c(n^(t|~i),e,t,r,o,a)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return i(o(a(e),8*e.length))}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default="00000000-0000-0000-0000-000000000000"},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./validate.js"))&&i.__esModule?i:{default:i};n.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},{"./validate.js":16}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],8:[function(e,t,n){"use strict";let i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)};const r=new Uint8Array(16)},{}],9:[function(e,t,n){"use strict";function i(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:return t^n^i;case 2:return t&n^t&i^n&i;case 3:return t^n^i}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a);for(let i=0;i<a;++i){const t=new Uint32Array(16);for(let n=0;n<16;++n)t[n]=e[64*i+4*n]<<24|e[64*i+4*n+1]<<16|e[64*i+4*n+2]<<8|e[64*i+4*n+3];s[i]=t}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(let c=0;c<a;++c){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=s[c][t];for(let t=16;t<80;++t)e[t]=r(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let o=n[0],a=n[1],u=n[2],d=n[3],l=n[4];for(let n=0;n<80;++n){const s=Math.floor(n/20),c=r(o,5)+i(s,a,u,d)+l+t[s]+e[n]>>>0;l=d,d=u,u=r(a,30)>>>0,a=o,o=c}n[0]=n[0]+o>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+u>>>0,n[3]=n[3]+d>>>0,n[4]=n[4]+l>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./validate.js"))&&i.__esModule?i:{default:i};const o=[];for(let a=0;a<256;++a)o.push((a+256).toString(16).substr(1));n.default=function(e,t=0){const n=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!(0,r.default)(n))throw TypeError("Stringified UUID is invalid");return n}},{"./validate.js":16}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./rng.js")),r=o(e("./stringify.js"));function o(e){return e&&e.__esModule?e:{default:e}}let a,s,c=0,u=0;n.default=function(e,t,n){let o=t&&n||0;const d=t||new Array(16);let l=(e=e||{}).node||a,f=void 0!==e.clockseq?e.clockseq:s;if(null==l||null==f){const t=e.random||(e.rng||i.default)();null==l&&(l=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==f&&(f=s=16383&(t[6]<<8|t[7]))}let h=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:u+1;const g=h-c+(p-u)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>c)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=h,u=p,s=f;const v=(1e4*(268435455&(h+=122192928e5))+p)%4294967296;d[o++]=v>>>24&255,d[o++]=v>>>16&255,d[o++]=v>>>8&255,d[o++]=255&v;const m=h/4294967296*1e4&268435455;d[o++]=m>>>8&255,d[o++]=255&m,d[o++]=m>>>24&15|16,d[o++]=m>>>16&255,d[o++]=f>>>8|128,d[o++]=255&f;for(let i=0;i<6;++i)d[o+i]=l[i];return t||(0,r.default)(d)}},{"./rng.js":8,"./stringify.js":10}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./v35.js")),r=o(e("./md5.js"));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,i.default)("v3",48,r.default);n.default=a},{"./md5.js":4,"./v35.js":13}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){function o(e,o,s,c){if("string"==typeof e&&(e=a(e)),"string"==typeof o&&(o=(0,r.default)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(o),u.set(e,o.length),(u=n(u))[6]=15&u[6]|t,u[8]=63&u[8]|128,s){c=c||0;for(let e=0;e<16;++e)s[c+e]=u[e];return s}return(0,i.default)(u)}try{o.name=e}catch(u){}return o.DNS=s,o.URL=c,o},n.URL=n.DNS=void 0;var i=o(e("./stringify.js")),r=o(e("./parse.js"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=s;const c="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=c},{"./parse.js":6,"./stringify.js":10}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./rng.js")),r=o(e("./stringify.js"));function o(e){return e&&e.__esModule?e:{default:e}}n.default=function(e,t,n){const o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return(0,r.default)(o)}},{"./rng.js":8,"./stringify.js":10}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("./v35.js")),r=o(e("./sha1.js"));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,i.default)("v5",80,r.default);n.default=a},{"./sha1.js":9,"./v35.js":13}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./regex.js"))&&i.__esModule?i:{default:i};n.default=function(e){return"string"==typeof e&&r.default.test(e)}},{"./regex.js":7}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./validate.js"))&&i.__esModule?i:{default:i};n.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},{"./validate.js":16}],DataController:[function(e,t,n){"use strict";cc._RF.push(t,"8b1a6oP4RFDPK6siYwZjUQG","DataController");var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./TiniController"),o=cc._decorator,a=o.ccclass,s=(o.property,function(){function e(){}var t;return t=e,e.getInstance=function(){return t.instance||(t.instance=new t),t.instance},e.prototype.init=function(e){var t=this;return new Promise(function(n){t.isHasData().then(function(t){t||(r.default.getInstance().isHasTiniApp()?r.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"userData",data:e}},function(){n(!0)}):(cc.sys.localStorage.setItem("userData",JSON.stringify(e)),n(!0))),n(!0)})})},e.prototype.isHasData=function(){var e=this;return new Promise(function(t){r.default.getInstance().isHasTiniApp()?e.getData().then(function(e){t(e)}):t(cc.sys.localStorage.getItem("userData"))})},e.prototype.saveData=function(e){r.default.getInstance().isHasTiniApp()?r.default.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:"userData",data:{isNewBie:e.isNewBie,bestScore:e.bestScore}}},function(){console.log("Save data to tini app")}):cc.sys.localStorage.setItem("userData",JSON.stringify(e))},e.prototype.getData=function(){return new Promise(function(e){r.default.getInstance().isHasTiniApp()?r.default.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:"userData"}},function(t){e(t.res.data)}):e(JSON.parse(cc.sys.localStorage.getItem("userData")))})},e.prototype.isNewBie=function(){var e=this;return new Promise(function(t){e.getData().then(function(e){t(e.isNewBie)})})},t=i([a],e)}());n.default=s,cc._RF.pop()},{"./TiniController":"TiniController"}],DiskSpear:[function(e,t,n){"use strict";cc._RF.push(t,"bb761TcMvBH6I3MGx/zfESv","DiskSpear");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){},t.prototype.onAnimCompleted=function(){this.node.parent.removeChild(this.node)},o([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],Disk:[function(e,t,n){"use strict";cc._RF.push(t,"78abfARCjJDRpCy1Cuopm7V","Disk");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.diskNumbers=[],t.crossHair=null,t.gameBoard=null,t.gameScene=null,t.onLauncher=!1,t.hasCombine=!1,t._n=0,t}return r(t,e),Object.defineProperty(t.prototype,"n",{get:function(){return this._n},set:function(e){var t=this;this._n=e;var n=this.node.getComponent(cc.Sprite),i=this.node.getComponents(cc.PhysicsCircleCollider);this.diskNumbers.map(function(r){r.name==="disk_"+e&&(n.spriteFrame=r,i.map(function(e){e.radius=t.node.width/2+2,e.apply()}))})},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.addEventListener()},t.prototype.start=function(){},t.prototype.init=function(e,t){this.gameBoard=e,this.gameScene=t,this.node.getChildByName("Explode").getComponent("ExplodeAnim").init(t)},t.prototype.randomNumber=function(){return Math.random()},t.prototype.onBeginContact=function(e,t,n){this.gameBoard.onBoardColliderIntersect(t,n)},t.prototype.onEndContact=function(){this.gameBoard.onBoardColliderEnd()},t.prototype.onPreSolve=function(){},t.prototype.onPostSolve=function(){},t.prototype.onDestroyPlanet=function(){this.gameScene.isProgressDestroyPlanet&&!this.onLauncher&&(this.gameScene.isProgressDestroyPlanet=!1,console.log("Plant will destroy...."),this.crossHair.opacity=255,this.gameBoard.meteorite.init(this.crossHair.parent))},t.prototype.addEventListener=function(){cc.sys.isMobile||cc.sys.IPAD?this.node.on(cc.Node.EventType.TOUCH_START,this.onDestroyPlanet,this):this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onDestroyPlanet,this)},o([c([cc.SpriteFrame])],t.prototype,"diskNumbers",void 0),o([c(cc.Node)],t.prototype,"crossHair",void 0),o([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],Effect:[function(e,t,n){"use strict";cc._RF.push(t,"cfd108Q4vxN066JCFSt95k+","Effect");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.btnClickEffect=function(e,t){cc.tween(e.currentTarget).to(.1,{scale:1.05}).to(.1,{scale:1}).call(function(){t()}).start()},o([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],ExplodeAnim:[function(e,t,n){"use strict";cc._RF.push(t,"4e096Qngj9JK46GXbX1j+02","ExplodeAnim");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameScene=null,t}return r(t,e),t.prototype.init=function(e){this.gameScene=e},t.prototype.start=function(){},t.prototype.onExplodeAnimEnd=function(){this.node.parent.removeFromParent(),console.log("Planet is destroy"),this.gameScene.board.setScore(),this.gameScene.addEventListener(),this.gameScene.launcherPoint.opacity=255},o([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],FirebaseManager:[function(e,t,n){"use strict";cc._RF.push(t,"87c6dFY13xGnJo7fk57OLkg","FirebaseManager");var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=e("moment"),o=cc._decorator,a=o.ccclass,s=(o.property,"players"),c=function(e,t,n){var i=e.constructor.getInstance(),r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(i._firebase)return r.apply(i,e);i._lazyCalls.push({func:n.value,args:arguments})}},u=function(){function e(){this._firebase=null,this._db=null,this._lazyCalls=[]}var t;return t=e,e.getInstance=function(){return t._instance?t._instance:(t._instance=new t,t._instance)},e.prototype.initFirebase=function(){var e,t,n,i,r=this;e=0,t=function(){if(++e<2)return i.onload=t,i.src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js",void document.body.appendChild(i);firebase.initializeApp({apiKey:"AIzaSyBQojTvm8VTjCaC5e9a3N6IYMF6Cr4fG80",authDomain:"merge-planet-tiniapp.firebaseapp.com",databaseURL:"https://merge-planet-tiniapp.asia-southeast2.firebasedatabase.app",projectId:"merge-planet-tiniapp",storageBucket:"merge-planet-tiniapp.appspot.com",messagingSenderId:"1072456586816",appId:"1:1072456586816:web:a57c520ce642101709b1a5"}),r._firebase=firebase,r._db=firebase.firestore(),window.firebase=null,r._lazyCalls.forEach(function(e){return e.func.apply(e,e.args)})},n=document.createElement("script"),i=document.createElement("script"),n.onload=t,n.src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js",document.body.appendChild(n)},e.prototype.setData=function(e,t,n){try{this._db.collection(e).doc("user_"+t).set(n,{merge:!0}).then(function(){console.log("Document written")}).catch(function(e){console.error("Error adding document: ",e)})}catch(i){console.error("save firebase err: ",i)}},e.prototype.getData=function(e,t,n){console.log("get data from Firebase from getData()"),this._db.collection(e).doc(t).get().then(function(i){if(i.exists){var r=i.data();n(r)}else console.log("no doc",e,t),n(null,null)}).catch(function(e){n(e)})},e.prototype.setPlayerData=function(e,t){var n=e;n&&this.setData(s,n,t)},e.prototype.getConfig=function(e){console.log("get data from getConfig"),this._db.collection("config").doc("configId").get().then(function(t){t.exists?e(null,t.data()):e(null,null)}).catch(function(t){e(t,null)})},e.prototype.getLeaderboard=function(e){var t=r(),n=t.toISOString(),i=cc.sys.localStorage.getItem("nextCheckPointLB");console.log(r(n)>=r(i)),i&&"null"!==i?n>=i?(console.log("Update LB"),this.getLbFromFirebase(e),this.addCheckPoint(t)):(console.log("LB update sau 4h"),e(null)):(console.log("Set checkpoint"),this.addCheckPoint(t),this.getLbFromFirebase(e))},e.prototype.addCheckPoint=function(e){cc.sys.localStorage.setItem("nextCheckPointLB",e.add(4,"hours").toISOString())},e.prototype.getLbFromFirebase=function(e){console.log("start get data from getLbFromFirebase"),this._db.collection(s).orderBy("bestScore","desc").limit(10).get().then(function(t){console.log("get data from Firebase");var n=[];t.empty?(console.log("no doc"),e(null)):(t.docs.forEach(function(e,t){n.push({name:e.data().name,ava:e.data().ava,rank:t+1,id:e.id,bestScore:e.data().bestScore})}),cc.sys.localStorage.setItem("leaderBoard",JSON.stringify(n)),console.log("Get Lb from FB done and set localStorage"),e(null))}).catch(function(t){console.log(t),e(t)})},e._instance=null,i([c],e.prototype,"setPlayerData",null),i([c],e.prototype,"getConfig",null),i([c],e.prototype,"getLeaderboard",null),t=i([a],e)}();n.default=u,cc._RF.pop()},{moment:2}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"7584fDXk+FB0pNGBxL4FOnq","Game");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(t){o(t)}}function s(e){try{c(i.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./Board"),u=e("./Constant"),d=e("./Launcher"),l=e("./Effect"),f=e("./LeaderBoardController"),h=e("./FirebaseManager"),p=e("./DataController"),g=e("./AudioController"),v=e("./TiniController"),m=e("gameanalytics"),y=e("gameanalytics"),_="f481775f10954890d991db4088d6dd11",S="41e3e7cd47f73e0ce1714bf249d9ac50243bf393",E=cc._decorator,b=E.ccclass,A=E.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.board=null,t.launcher=null,t.launcherCircle=null,t.launcherPoint=null,t.gameOverScene=null,t.gameWinScene=null,t.leaderBoard=null,t.musicBtn=null,t.overlay=null,t.isProgressDestroyPlanet=!1,t.userInfor=null,t}return r(t,e),t.prototype.onLoad=function(){var e=this;cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=0,cc.director.getPhysicsManager().gravity=cc.v2(),h.default.getInstance().initFirebase(),v.default.getInstance().init(this),m.GameAnalytics.setEnabledInfoLog(!0),m.GameAnalytics.setEnabledVerboseLog(!0),m.GameAnalytics.configureBuild("1.0.0"),v.default.getInstance().isHasTiniApp()?v.default.getInstance().getPlayerInfo().then(function(t){m.GameAnalytics.configureUserId(t.customerId.toString()),m.GameAnalytics.initialize(_,S),e.userInfor=t}):(m.GameAnalytics.configureUserId("local_id"),m.GameAnalytics.initialize(_,S)),v.default.getInstance().isHasTiniApp()?v.default.getInstance().initDataUserTiki().then(function(){e.initData(),e.leaderBoard.init(e,e.launcher),e.musicBtn.init(e)}):(this.initData(),this.leaderBoard.init(this,this.launcher),this.musicBtn.init(this))},t.prototype.initData=function(){var e=this;p.default.getInstance().init({isNewBie:!0,bestScore:0}).then(function(){e.board.initBestScore(),e.getComponent("GuideController").init()})},t.prototype.start=function(){this.board.init(this,this.launcher),this.launcher.init(this,this.board),this.addEventListener()},t.prototype.reset=function(){var e=this;this.getComponent(cc.AudioSource).volume=.5,cc.tween(this.overlay).to(.5,{opacity:0}).start(),this.board.reset(),this.launcher.init(this,this.board),this.board.gameLevel=1,this.gameOverScene.position=cc.v3(0,-2163,0),this.gameWinScene.active=!1,setTimeout(function(){e.addEventListener()},500)},t.prototype.continueGame=function(){cc.tween(this.overlay).to(.5,{opacity:0}).start(),this.gameOverScene.position=cc.v3(0,-2163,0),this.isProgressDestroyPlanet=!0,this.launcherPoint.opacity=0;var e=this.getComponent("GuideController").guidePanel;this.getComponent("GuideController").textGuide.string="Ch\u1ecdn m\u1ed9t h\xe0nh tinh b\u1ea1n mu\u1ed1n ph\xe1 h\u1ee7y.",cc.tween(e).to(.5,{opacity:255}).start()},t.prototype.onClickOpenLeaderBoard=function(e){var t=this;l.default.btnClickEffect(e,function(){t.leaderBoard.node.emit("openLeaderBoard")})},t.prototype.onClickTryAgain=function(e){var t=this;l.default.btnClickEffect(e,function(){t.node.emit("clickTryAgain")})},t.prototype.onClickContinue=function(e){var t=this;this.removeEventListener(),l.default.btnClickEffect(e,function(){t.node.emit("clickContinue")})},t.prototype.onClickNewGame=function(e){var t=this;l.default.btnClickEffect(e,function(){t.node.emit("clickNewGame")})},t.prototype.onGameMouseMove=function(e){this.board.onMouseMove(e)},t.prototype.onGameMouseUp=function(e){this.board.onMouseUp(e)},t.prototype.onGameMouseDown=function(e){this.board.onMouseDown(e)},t.prototype.onInviteFriend=function(e){var t=this;l.default.btnClickEffect(e,function(){return a(t,void 0,void 0,function(){return s(this,function(){return console.log("Invite friend"),[2]})})})},t.prototype.onShare=function(e){l.default.btnClickEffect(e,function(){console.log("Share game")})},t.prototype.judgeOver=function(){return this.board.currentDisk==u.STAGE[this.board.gameLevel-1].diskLauncherMax},t.prototype.gameOver=function(){var e=this;console.log("game over"),this.board.diskLayer.children.forEach(function(e){e.getComponent(cc.RigidBody)&&(e.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0))}),this.launcher.resetImpluse(),this.removeEventListener(),this.board.saveScore(),p.default.getInstance().getData().then(function(t){cc.tween(e.overlay).to(.5,{opacity:255}).start(),cc.tween(e.gameOverScene).to(.5,{position:cc.v3(0,-145,0)}).start();var n=e.gameOverScene.getChildByName("Your score").getComponent(cc.Label),i=e.gameOverScene.getChildByName("Best score").getComponent(cc.Label),r=e.gameOverScene.getChildByName("username").getComponent(cc.Label),o=e.gameOverScene.getChildByName("userId").getComponent(cc.Label);n.string="\u0110i\u1ec3m: "+e.board.currentTrophy,i.string="\u0110i\u1ec3m cao: "+t.bestScore,r.string=e.userInfor.name,o.string="ID: "+e.userInfor.customerId}),v.default.getInstance().isHasTiniApp()&&v.default.getInstance().sendMessageToTiniApp({api:"reportAnalytics",params:{event:"post_score",data:{score:this.board.currentTrophy,user_id:this.userInfor.customerId,character:this.userInfor.name}}}),this.logFailed(this.board.gameLevel,this.board.currentTrophy)},t.prototype.gameWin=function(){this.launcher.resetImpluse(),this.removeEventListener(),this.board.saveScore(),this.gameWinScene.active=!0,this.gameWinScene.getComponent(cc.Animation).play(),cc.tween(this.getComponent(cc.AudioSource)).to(1,{volume:0}).start(),this.gameWinScene.getComponent(cc.AudioSource).play(),this.logWinGame(this.board.gameLevel,this.board.currentTrophy)},t.prototype.update=function(){},t.prototype.addEventListener=function(){cc.sys.isMobile||5===cc.sys.platform?(this.board.node.on(cc.Node.EventType.TOUCH_MOVE,this.onGameMouseMove,this),this.board.node.on(cc.Node.EventType.TOUCH_END,this.onGameMouseUp,this),this.board.node.on(cc.Node.EventType.TOUCH_START,this.onGameMouseDown,this)):(this.board.node.on(cc.Node.EventType.MOUSE_MOVE,this.onGameMouseMove,this),this.board.node.on(cc.Node.EventType.MOUSE_UP,this.onGameMouseUp,this),this.board.node.on(cc.Node.EventType.MOUSE_DOWN,this.onGameMouseDown,this)),this.node.on("clickTryAgain",this.reset,this),this.node.on("clickNewGame",this.reset,this),this.node.on("clickContinue",this.continueGame,this)},t.prototype.removeEventListener=function(){cc.sys.isMobile||5===cc.sys.platform?(this.board.node.off(cc.Node.EventType.TOUCH_MOVE,this.onGameMouseMove,this),this.board.node.off(cc.Node.EventType.TOUCH_END,this.onGameMouseUp,this),this.board.node.off(cc.Node.EventType.TOUCH_START,this.onGameMouseDown,this)):(this.board.node.off(cc.Node.EventType.MOUSE_MOVE,this.onGameMouseMove,this),this.board.node.off(cc.Node.EventType.MOUSE_UP,this.onGameMouseUp,this),this.board.node.off(cc.Node.EventType.MOUSE_DOWN,this.onGameMouseDown,this))},t.prototype.resetDataUser=function(){p.default.getInstance().saveData({isNewBie:!0,bestScore:0})},t.prototype.logEvent=function(e){m.GameAnalytics.addDesignEvent(e)},t.prototype.logFailed=function(e,t){m.GameAnalytics.addProgressionEvent(y.EGAProgressionStatus.Fail,"Level"+e+"Score"+t)},t.prototype.logPassed=function(e){m.GameAnalytics.addProgressionEvent(y.EGAProgressionStatus.Complete,"Level"+e)},t.prototype.logWinGame=function(e,t){m.GameAnalytics.addProgressionEvent(y.EGAProgressionStatus.Complete,"WingameLevel"+e+"Score"+t)},t.prototype.logLevel=function(e){this.logEvent("Enter_Level_"+e),m.GameAnalytics.addProgressionEvent(y.EGAProgressionStatus.Start,"EnterLevel"+e)},t.prototype.logNextLevel=function(e){this.logEvent("NextLevel"+e),m.GameAnalytics.addProgressionEvent(y.EGAProgressionStatus.Start,"NextLevel"+e)},t.prototype.onClickCta=function(){console.log("click CTA"),v.default.getInstance().sendMessageToTiniApp({api:"navigateToMiniApp",params:{appId:"com.tini.appstore",path:"pages/list-apps/index",extraData:{code:"games"}}})},o([A(c.default)],t.prototype,"board",void 0),o([A(d.default)],t.prototype,"launcher",void 0),o([A(cc.Node)],t.prototype,"launcherCircle",void 0),o([A(cc.Node)],t.prototype,"launcherPoint",void 0),o([A(cc.Node)],t.prototype,"gameOverScene",void 0),o([A(cc.Node)],t.prototype,"gameWinScene",void 0),o([A(f.default)],t.prototype,"leaderBoard",void 0),o([A(g.default)],t.prototype,"musicBtn",void 0),o([A(cc.Node)],t.prototype,"overlay",void 0),o([b],t)}(cc.Component);n.default=C,cc._RF.pop()},{"./AudioController":"AudioController","./Board":"Board","./Constant":"Constant","./DataController":"DataController","./Effect":"Effect","./FirebaseManager":"FirebaseManager","./Launcher":"Launcher","./LeaderBoardController":"LeaderBoardController","./TiniController":"TiniController",gameanalytics:1}],GuideController:[function(e,t,n){"use strict";cc._RF.push(t,"3ba2b282W5A251VBfcqx6Ul","GuideController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(t){o(t)}}function s(e){try{c(i.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./Board"),u=e("./DataController"),d=cc._decorator,l=d.ccclass,f=d.property,h=["Ch\xe0o m\u1eebng \u0111\u1ebfn v\u1edbi Merge Planets!!!\n\u1ea4n v\xe0 gi\u1eef m\xe0n h\xecnh \u0111\u1ec3 t\u1ea1o l\u1ef1c \u0111\u1ea9y cho\nh\xe0nh tinh c\u1ee7a b\u1ea1n.\nTh\u1ea3 tay \u0111\u1ec3 b\u1eafn h\xe0nh tinh v\xe0o kh\xf4ng gian","L\xe0m t\u1ed1t l\u1eafm !!!\nTrong khi b\u1ea1n gi\u1eef l\u1ef1c, di chuy\u1ec3n ng\xf3n tay\n\u0111\u1ec3 ch\u1ec9nh g\xf3c b\u1eafn v\xe0o h\xe0nh tinh c\xf3 c\xf9ng\ns\u1ed1.","H\xe3y ch\xfa \xfd \u0111\u1ebfn thanh l\u1ef1c b\u1eafn \u1edf g\xf3c d\u01b0\u1edbi\nb\xean tr\xe1i m\xe0n h\xecnh.","Tuy\u1ec7t v\u1eddi, h\xe3y c\u1ed1 g\u1eafng t\u1ea1o ra nhi\u1ec1u h\xe0nh\ntinh h\u01a1n."],p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guidePanel=null,t.guideHand1=null,t.guideHand2=null,t.guide2Arrow=null,t.board=null,t.textGuide=null,t.guideLevel=0,t.isNewBie=null,t}return r(t,e),t.prototype.onLoad=function(){this.guidePanel.opacity=0,this.guideHand1.opacity=0,this.guideHand2.opacity=0,this.guide2Arrow.opacity=0},t.prototype.init=function(){var e=this;u.default.getInstance().isNewBie().then(function(t){e.isNewBie=t,e.isNewBie&&e.showGuide()})},t.prototype.start=function(){},t.prototype.showGuide=function(){var e=h[this.guideLevel];switch(this.textGuide.string=e,cc.tween(this.guidePanel).to(.5,{opacity:255}).start(),this.guideLevel){case 0:this.guideHand1.opacity=255,this.guideHand1.getComponent(cc.Animation).play();break;case 1:this.guideHand2.opacity=255,this.guideHand2.getComponent(cc.Animation).play();break;case 2:this.guide2Arrow.opacity=255,this.guide2Arrow.getComponent(cc.Animation).play()}},t.prototype.hideGuide=function(){var e=this;cc.tween(this.guidePanel).to(.5,{opacity:0}).call(function(){return a(e,void 0,void 0,function(){return s(this,function(){return this.guideLevel++,4===this.guideLevel?(console.log("end guide"),this.isNewBie=!1,this.hideGuide(),u.default.getInstance().getData().then(function(e){u.default.getInstance().saveData({isNewBie:!1,bestScore:e.bestScore})})):this.guideLevel<4&&(this.showGuide(),console.log("next guide",this.guideLevel)),[2]})})}).start()},t.prototype.nextGuide=function(){this.guideHand1.opacity=0,this.guideHand2.opacity=0,this.guide2Arrow.opacity=0,this.hideGuide()},o([f(cc.Node)],t.prototype,"guidePanel",void 0),o([f(cc.Node)],t.prototype,"guideHand1",void 0),o([f(cc.Node)],t.prototype,"guideHand2",void 0),o([f(cc.Node)],t.prototype,"guide2Arrow",void 0),o([f(c.default)],t.prototype,"board",void 0),o([f(cc.Label)],t.prototype,"textGuide",void 0),o([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"./Board":"Board","./DataController":"DataController"}],Launcher:[function(e,t,n){"use strict";cc._RF.push(t,"f0c46xuPwFNQ78oV+foouSE","Launcher");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Disk"),s=e("./Constant"),c=cc._decorator,u=c.ccclass,d=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.velocityX=0,t.gameScene=null,t.gameBoard=null,t.gameGuide=null,t.numberCurrent=[],t.impluse=1e3,t}return r(t,e),t.prototype.onLoad=function(){this.node.removeAllChildren()},t.prototype.start=function(){this.addEventlistener()},t.prototype.init=function(e,t){this.gameScene=e,this.gameBoard=t,this.gameGuide=e.getComponent("GuideController"),this.numberCurrent=[],this.reset()},t.prototype.reset=function(){this.impluse=1e3,this.gameBoard.impluseBar.getChildByName("mask").width=0,this.node.removeAllChildren(),this.newDiskLauncher()},t.prototype.newDiskLauncher=function(){this.getNumberCurrent();var e=cc.instantiate(this.gameBoard.diskPrefab).getComponent(a.default);e.onLauncher=!0;var t=e.getComponents(cc.PhysicsCircleCollider);Math.random()>.8&&this.numberCurrent.length>0?e.n=this.numberCurrent[Math.floor(Math.random()*(this.numberCurrent.length-1-0)+0)]:e.n=2,e.node.parent=this.node,e.node.scale=137/e.node.width,e.init(this.gameBoard,this.gameScene),t.map(function(t){t.radius=e.node.width/2,t.apply(),t.enabled=!1})},t.prototype.canLauncher=function(){return this.gameScene.launcherPoint.active&&this.gameBoard.currentDisk<s.STAGE[this.gameBoard.gameLevel-1].diskLauncherMax},t.prototype.startLauncher=function(e,t){var n=this,i=this.impluse*Math.sin((90-e)*(Math.PI/180)),r=this.impluse*Math.sin(e*(Math.PI/180));if(this.canLauncher()){var o=this.node.children[0];o.getComponent(a.default).onLauncher=!1;var s=o.getComponent(cc.RigidBody),c=o.getComponents(cc.PhysicsCircleCollider);o.scale=1,t<this.gameScene.node.width/2?s.linearVelocity=cc.v2(-i,r):s.linearVelocity=cc.v2(i,r),o.parent=this.gameBoard.diskLayer,c.map(function(e){e.enabled=!0,e.apply()}),this.reset(),this.gameBoard.setScore(),this.gameBoard.checkLevelUp(),this.gameGuide.isNewBie&&this.gameGuide.nextGuide(),this.gameScene.judgeOver()&&(this.gameBoard.timeover=setTimeout(function(){n.gameBoard.node.emit("game-over")},3e3))}},t.prototype.getNumberCurrent=function(){var e=this;this.gameBoard.diskLayer.children.forEach(function(t){var n=t.getComponent(a.default);t&&n&&(e.numberCurrent.includes(n.n)||2===n.n||e.numberCurrent.push(n.n))})},t.prototype.update=function(){this.gameScene.judgeOver()||clearTimeout(this.gameBoard.timeover)},t.prototype.addEventlistener=function(){},t.prototype.startIncreaseImpluse=function(){var e=this,t=!0;this.impluseTime=setInterval(function(){if(e.impluse<=5e3&&t){if(5e3===e.impluse)return void(t=!1);e.impluse+=16,e.gameBoard.impluseBar.getChildByName("mask").width+=1.228}else if(!t){if(1e3===e.impluse)return void(t=!0);e.impluse-=16,e.gameBoard.impluseBar.getChildByName("mask").width-=1.228}},10)},t.prototype.resetImpluse=function(){clearInterval(this.impluseTime),this.gameBoard.impluseBar.getChildByName("mask").width=0},o([d(cc.Integer)],t.prototype,"velocityX",void 0),o([u],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./Constant":"Constant","./Disk":"Disk"}],LeaderBoardController:[function(e,t,n){"use strict";cc._RF.push(t,"80ef9aB2hRLybKs2FAQ72dF","LeaderBoardController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=e("./Effect"),d=e("./FirebaseManager"),l=e("./TiniController"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.yourRankText=null,t.rankList=null,t.userRankPrefab=null,t.userList=[],t.gameController=null,t.launcher=null,t}return r(t,e),t.prototype._closeLeaderBoard=function(){var e=this;cc.tween(this.node).to(.5,{opacity:0}).call(function(){e.node.active=!1}).start()},t.prototype._openLeaderBoard=function(){this.launcher.resetImpluse(),this.gameController.removeEventListener(),this.node.active=!0,this.renderLeaderBoard(),cc.tween(this.node).to(.5,{opacity:255}).start(),cc.tween(this.gameController.overlay).to(.5,{opacity:255}).start()},t.prototype.clickBtnClose=function(e){var t=this;this.gameController.addEventListener(),u.default.btnClickEffect(e,function(){t.node.emit("closeLeaderBoard")}),cc.tween(this.gameController.overlay).to(.5,{opacity:0}).start()},t.prototype.onLoad=function(){this.node.opacity=0,this.node.position=cc.v3(0,0,0),this.node.on("closeLeaderBoard",this._closeLeaderBoard,this),this.node.on("openLeaderBoard",this._openLeaderBoard,this),this.node.active=!1},t.prototype.start=function(){},t.prototype.init=function(e,t){var n=this;this.gameController=e,this.launcher=t,l.default.getInstance().isHasTiniApp()&&l.default.getInstance().getPlayerInfo().then(function(e){n.userInfo=e})},t.prototype.renderLeaderBoard=function(){var e=this;console.log("render LB"),d.default.getInstance().getLeaderboard(function(){var t=JSON.parse(cc.sys.localStorage.getItem("leaderBoard"));t&&"null"!==t&&(e.rankList.removeAllChildren(),t.forEach(function(t){var n;t.id==="user_"+(null===(n=e.userInfo)||void 0===n?void 0:n.customerId)&&(e.node.getChildByName("Your rank").getComponent(cc.Label).string="Th\u1ee9 h\u1ea1ng c\u1ee7a b\u1ea1n l\xe0 "+t.rank);var i=cc.instantiate(e.userRankPrefab);i.getChildByName("user rank").getComponent(cc.Label).string=t.rank,i.getChildByName("user meta").getChildByName("user name").getComponent(cc.Label).string=t.name,i.getChildByName("user meta").getChildByName("user score").getComponent(cc.Label).string=t.bestScore,i.parent=e.rankList}))})},o([c(cc.Label)],t.prototype,"yourRankText",void 0),o([c(cc.Node)],t.prototype,"rankList",void 0),o([c(cc.Prefab)],t.prototype,"userRankPrefab",void 0),o([c],t.prototype,"userList",void 0),o([s],t)}(cc.Component);n.default=f,cc._RF.pop()},{"./Effect":"Effect","./FirebaseManager":"FirebaseManager","./TiniController":"TiniController"}],Meteorite:[function(e,t,n){"use strict";cc._RF.push(t,"7dce9bGmoFMbLUgEHB+fHWL","Meteorite");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t.diskLayer=null,t.diskLayerY=null,t}return r(t,e),t.prototype.onLoad=function(){this.diskLayer=this.node.parent.getChildByName("Disk layer"),this.node.x=640,this.node.opacity=0,this.diskLayerY=this.diskLayer.y},t.prototype.init=function(e){this.node.opacity=255;var t=this.node.parent.parent.getComponent("GuideController").guidePanel;cc.tween(t).to(.5,{opacity:0}).start(),this.node.y=this.node.x*Math.sin(Math.PI/180*60)+e.position.y+this.diskLayerY,this.target=cc.v3(e.position.x,e.position.y+this.diskLayerY,0),console.log("Target is set..."),this.fire(e)},t.prototype.start=function(){},t.prototype.fire=function(e){var t=this;console.log("Fire..."),cc.tween(this.node).parallel(cc.tween().to(.5,{opacity:255}),cc.tween().to(2,{position:this.target})).call(function(){e.getChildByName("Crosshair").opacity=0,t.node.opacity=0,t.node.x=640,t.node.y=0,e.getChildByName("Explode").getComponent(cc.Animation).play(),e.getComponent(cc.Sprite).spriteFrame=null,console.log("Place in planet... Explode")}).start()},o([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{}],TiniController:[function(e,t,n){"use strict";cc._RF.push(t,"81e49bTXshCpLGR/74OntgL","TiniController");var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=e("uuid"),o=cc._decorator,a=o.ccclass,s=(o.property,function(){function e(){this.callbacks={}}var t;return t=e,e.getInstance=function(){return t._instance?t._instance:(t._instance=new t,t._instance)},e.prototype.init=function(e){var t=this;this.gameScene=e,window.addEventListener("message",function(e){var n=e.data,i=n.requestId,r=n.result;if(void 0!==t.callbacks[i]){var o=t.callbacks[i];delete t.callbacks[i],o(r)}})},e.prototype.initDataUserTiki=function(){var e=this;return new Promise(function(t){e.isHasTiniApp()&&e.sendMessageToTiniApp({api:"getUserInfo"},function(n){e.userTiniInfo=n.res,t(!0)})})},e.prototype.sendMessageToTiniApp=function(e,t){var n=r.v4();this.callbacks[n]=t,my.postMessage({requestId:n,params:e})},e.prototype.isHasTiniApp=function(){try{return my}catch(e){}},e.prototype.getPlayerInfo=function(){var e=this;return new Promise(function(t){e.sendMessageToTiniApp({api:"getUserInfo"},function(e){t(e.res)})})},e.prototype.start=function(){},e._instance=null,t=i([a],e)}());n.default=s,cc._RF.pop()},{uuid:3}]},{},["Analytics","AudioController","Board","Constant","DataController","Disk","DiskSpear","Effect","ExplodeAnim","FirebaseManager","Game","GuideController","Launcher","LeaderBoardController","Meteorite","TiniController"]);